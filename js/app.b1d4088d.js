(function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],p=0,c=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&c.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(c.length)c.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==s[o]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},s={app:0},r=[];function o(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"8c8a39cb","chunk-2d0e55bf":"7f2e0a33","chunk-6c734d7e":"d8ba05e4","chunk-8a635936":"f21e1800"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-6c734d7e":1,"chunk-8a635936":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"31d6cfe0","chunk-2d0e55bf":"31d6cfe0","chunk-6c734d7e":"37ba9444","chunk-8a635936":"c4debf92"}[e]+".css",s=l.p+n,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var u=r[o],p=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(p===n||p===s))return t()}var c=document.getElementsByTagName("style");for(o=0;o<c.length;o++){u=c[o],p=u.getAttribute("data-href");if(p===n||p===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete i[e],d.parentNode.removeChild(d),a(r)},d.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=r);var u,p=document.createElement("script");p.charset="utf-8",p.timeout=120,l.nc&&p.setAttribute("nonce",l.nc),p.src=o(e);var c=new Error;u=function(t){p.onerror=p.onload=null,clearTimeout(d);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;c.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",c.name="ChunkLoadError",c.type=n,c.request=i,a[1](c)}s[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:p})}),12e4);p.onerror=p.onload=u,document.head.appendChild(p)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],p=u.push.bind(u);u.push=t,u=u.slice();for(var c=0;c<u.length;c++)t(u[c]);var d=p;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"13e6":function(e,t,a){"use strict";a("99af"),a("4160"),a("159b");var n=a("284c"),i=(a("a623"),a("4ec9"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("ddb0"),{NUMBER:"number",STRING:"string",BOOLEAN:"boolean",DATE:"date",MONTH:"month",YEAR:"year",TIME:"time",GEOGRAPHY:"geography",UNCERTAIN:"uncertain"}),s={CATEGORY:"category",METRICS:"metrics",NONE:"none"},r={CONSTANT:"constant",ENUMERATE:"enumerate",VARIABLE:"variable",INSTANCE:"instance"},o={$:/\$\d{1}/g,LOGIC:/[&\|()]/g,NUMBER:/^(-)?\d+(\.\d+)?$/,STRING:/^[\u4e00-\u9fa5_a-zA-Z0-9,#.-]+$/,BOOLEAN:/^(true|false)$/,DATE:/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/,MONTH:/^[0-9]{4}-(0[123456789]|(10|11|12))$/,YEAR:/^[0-9]{4}$/,TIME:/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30))) (0\d{1}|1\d{1}|2[0-3]):[0-5]\d{1}:[0-5]\d{1}$/,GEOGRAPHY:/ /},l=(a("4de4"),a("7db0"),a("caad"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("2532"),a("1276"),a("bf2d")),u=a("9f12"),p=a("53fe"),c=a("2fa7"),d=(a("a630"),a("c975"),a("466d"),a("498a"),function(){function e(t){var a=t.dataType,n=t.inputTypes,i=void 0===n?[]:n,s=t.regulations,r=void 0===s?[]:s;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.templateId=null,this.holder=null,this.dataType=a,this.inputTypes=0===i.length?[B.INPUT.CONSTANT,B.INPUT.ENUMERATE,B.INPUT.VARIABLE,B.INPUT.INSTANCE]:i,this.regulations=0===r.length?[a]:r)}return Object(p["a"])(e,[{key:"getTemplateId",value:function(){return this.templateId}},{key:"getHolder",value:function(){return this.holder}},{key:"getDataType",value:function(){return this.dataType}},{key:"getCompatibleInputTypes",value:function(){return this.inputTypes}},{key:"isInputCompatible",value:function(e){if(B.isLegalInputType(e))return this.inputTypes.includes(e);console.error("checking compatibility: input type [".concat(e,"] does not exist"))}},{key:"getRegulations",value:function(){return this.regulations}},{key:"setTemplateId",value:function(e){this.templateId=e}},{key:"setHolder",value:function(e){this.holder=e}}],[{key:"validate",value:function(e){var t=e.dataType,a=e.inputTypes,n=void 0===a?[]:a,i=e.regulations,s=void 0===i?[]:i,r="defining parameter";return B.isLegalDataType(t)?n.every((function(e){return B.isLegalInputType(e)}))?!!s.every((function(e){return B.isLegalDataType(e)}))||(console.error("".concat(r,": regular type does not exist")),!1):(console.error("".concat(r,": input type does not exist")),!1):(console.error("".concat(r,": data type can not be [").concat(t,"]")),!1)}}]),e}()),m=function(){function e(t){var a=t.templateId,n=t.index,i=t.content;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.templateId=a,this.index=n,this.content=i)}return Object(p["a"])(e,[{key:"getContent",value:function(){return this.content}}],[{key:"validate",value:function(e){var t=e.templateId,a=e.index,n=e.content;return!(!t&&0!==t||!a&&0!==a||!n||""===n.trim())||(console.error("defining text: missing information"),!1)}}]),e}(),T=function(){function e(t){var a=t.id,n=t.name,i=t.alias,s=void 0===i?n:i,r=t.context,o=void 0===r?"uncontexted":r,l=t.templateDisplay,p=t.templateCode,c=t.resultDataType,d=t.params,m=void 0===d?{}:d,T=t.customized,h=void 0!==T&&T;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.alias=s,this.context=o,this.templateDisplay=l,this.templateCode=p,this.resultDataType=c,this.customized=h,this.params=m,this.paramSize=0,this.syncParameters(),this.segmentsDisplay=this.initSegments(this.templateDisplay),this.segmentsCode=this.initSegments(this.templateCode),this.firstParam=null,this.firstParamIndex=null,this.firstTextIndex=null,this.firstTextNeighbors=null,this.initGrammtical())}return Object(p["a"])(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getAlias",value:function(){return this.alias}},{key:"getContext",value:function(){return this.context}},{key:"getParams",value:function(){return this.params}},{key:"getSegmentsDisplay",value:function(){return this.segmentsDisplay}},{key:"getSegmentsCode",value:function(){return this.segmentsCode}},{key:"getResultDataType",value:function(){return this.resultDataType}},{key:"getParamSize",value:function(){return this.paramSize}},{key:"isBool",value:function(){return this.resultDataType===B.DATA.BOOLEAN}},{key:"isCustomized",value:function(){return this.customized}},{key:"getFirstParam",value:function(){return this.firstParam}},{key:"getFirstParamIndex",value:function(){return this.firstParamIndex}},{key:"getFirstTextIndex",value:function(){return this.firstTextIndex}},{key:"getFirstTextNeighbors",value:function(){return this.firstTextNeighbors}},{key:"setAlias",value:function(e){this.alias=e}},{key:"syncParameters",value:function(){var e=this,t=0;Object.keys(this.params).forEach((function(a){t++,e.params[a].setTemplateId(e.id),e.params[a].setHolder(a)})),this.paramSize=t}},{key:"initSegments",value:function(e){var t=this,a=[],n=e.split(B.REGS.$),i=e.match(B.REGS.$),s=0,r=0;return n.forEach((function(e){""!==e&&a.push(new m({templateId:t.id,index:s++,content:e})),r<i.length&&(a.push(t.params[i[r]]),r++)})),a}},{key:"initGrammtical",value:function(){this.firstParam=this.segmentsDisplay.find((function(e){return"function"===typeof e.getHolder})),this.firstParamIndex=this.segmentsDisplay.indexOf(this.firstParam),this.firstTextIndex=0===this.firstParamIndex?1:0,this.segmentsDisplay[this.firstTextIndex].getContent().includes(this.name)?this.firstTextNeighbors=this.segmentsDisplay[this.firstTextIndex].getContent().split(this.name).map((function(e){return e.trim()})):this.firstTextNeighbors=["",this.segmentsDisplay[this.firstTextIndex].getContent()].map((function(e){return e.trim()}))}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.alias,e.context,e.templateDisplay),i=e.templateCode,s=e.resultDataType,r=e.params,o=void 0===r?{}:r,l=(e.customized,"defining template [".concat(a,"]"));if(!t&&0!==t||!a||!n||!i)return console.error("".concat(l,": missing information")),!1;if(!B.isLegalDataType(s)&&!o[s])return console.error("".concat(l,": result data type can not be [").concat(s,"]")),!1;var u=new Set(n.match(B.REGS.$)),p=new Set(i.match(B.REGS.$)),c=new Set;return Object.keys(o).forEach((function(e){if(!(o[e]instanceof d))return console.error("".concat(l,": given object not an instance of Parameter")),!1;c.add(e)})),u.size!==p.size||u.size!==c.size?(console.error("".concat(l,": unmatched parameter(s)")),!1):!!Array.from(c).every((function(e){return u.has(e)&&p.has(e)}))||(console.error("".concat(l,": unmatched parameter(s)")),!1)}}]),e}(),h=function(){function e(t){var a=t.id,n=t.code,i=t.label;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.code=n,this.label=i,this.fieldId=null,this.dataType=null)}return Object(p["a"])(e,[{key:"setFieldId",value:function(e){return this.fieldId=e,this}},{key:"setDataType",value:function(e){return this.dataType=e,this}},{key:"getCode",value:function(){return this.code}},{key:"getLabel",value:function(){return this.label}},{key:"getFieldId",value:function(){return this.fieldId}},{key:"getDataType",value:function(){return this.dataType}}],[{key:"validate",value:function(e){var t=e.id,a=e.code,n=e.label,i="defining enum [".concat(n,"]");return!(!t&&0!==t||!a&&0!==a||!n)||(console.error("".concat(i,": missing information")),!1)}}]),e}(),y=function(){function e(t){var a=t.id,n=t.name,i=t.label,s=t.hint,r=void 0===s?"":s,o=t.dataType,l=t.distributeType,p=void 0===l?B.DISTRIBUTE.NONE:l,c=t.unit;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.label=i,this.hint=r,this.tableId=null,this.tableName=null,this.dataType=o,this.distributeType=p,this.unit=c,this.enums=[],this.mapEnumsCode={})}return Object(p["a"])(e,[{key:"addEnums",value:function(e){var t=this,a="adding enums for [".concat(this.name,"]");return this.distributeType===B.DISTRIBUTE.CATEGORY?e.forEach((function(e){e instanceof h?1===t.mapEnumsCode[e.getCode()]?console.error("".concat(a,": enum ").concat(e.getCode()," already exists for field ").concat(t.name)):(t.mapEnumsCode[e.getCode()]=1,t.enums.push(e.setFieldId(t.id).setDataType(t.dataType))):console.error("".concat(a,": given object not an instance of Enum"))})):console.error("".concat(a,": can not have enums because it is not a category")),this}},{key:"setTableId",value:function(e){return this.tableId=e,this}},{key:"setTableName",value:function(e){return this.tableName=e,this}},{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getHint",value:function(){return this.hint}},{key:"getTableId",value:function(){return this.tableId}},{key:"getTableName",value:function(){return this.tableName}},{key:"getDataType",value:function(){return this.dataType}},{key:"getDistributeType",value:function(){return this.distributeType}},{key:"getUnit",value:function(){return this.unit}},{key:"getEnums",value:function(){return this.enums}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.label,e.hint,e.dataType),i=e.distributeType,s=void 0===i?B.DISTRIBUTE.NONE:i,r=(e.unit,"defining field [".concat(a,"]"));return!t&&0!==t||!a?(console.error("".concat(r,": missing information")),!1):B.isLegalDataType(n)?!!B.isLegalDistributeType(s)||(console.error("".concat(r,": distribute type can not be [").concat(s,"]")),!1):(console.error("".concat(r,": data type can not be [").concat(n,"]")),!1)}}]),e}(),f=function(){function e(t){var a=t.parameter;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.parameter=a,this.inputType=B.INPUT.CONSTANT,this.value=null,this.legitimate=!1,this.actualResultDataType=null)}return Object(p["a"])(e,[{key:"getHolder",value:function(){return this.parameter.getHolder()}},{key:"getParameterDataType",value:function(){return this.parameter.getDataType()}},{key:"getDataType",value:function(){var e=this.getParameterDataType();return B.isUncertainDataType(e)?this.actualResultDataType:e}},{key:"getCompatibleInputTypes",value:function(){return this.parameter.getCompatibleInputTypes()}},{key:"isInputCompatible",value:function(e){return this.parameter.isInputCompatible(e)}},{key:"getRegulations",value:function(){return this.parameter.getRegulations()}},{key:"getInputType",value:function(){return this.inputType}},{key:"getValue",value:function(){return this.value}},{key:"isLegitimate",value:function(){return this.legitimate}},{key:"updateLegitimate",value:function(){var e=B.isUncertainDataType(this.getParameterDataType());this.value instanceof v&&(this.legitimate=(this.parameter.getDataType()===this.value.getResultDataType()||e)&&this.value.isLegitimate())}},{key:"setValue",value:function(e){var t=B.isUncertainDataType(this.getParameterDataType());return e instanceof y?(this.inputType=B.INPUT.VARIABLE,this.legitimate=this.parameter.getDataType()===e.getDataType(),t&&(this.actualResultDataType=e.getDataType(),this.legitimate=!0)):e instanceof v?(this.inputType=B.INPUT.INSTANCE,this.legitimate=this.parameter.getDataType()===e.getResultDataType()&&e.isLegitimate(),t&&(this.actualResultDataType=e.getResultDataType(),this.legitimate=e.isLegitimate())):e instanceof h?(this.inputType=B.INPUT.ENUMERATE,this.legitimate=B.regTestMulti(this.getRegulations(),e.getCode()),t&&(this.actualResultDataType=e.getDataType())):(this.inputType=B.INPUT.CONSTANT,this.legitimate=B.regTestMulti(this.getRegulations(),e),t&&(this.actualResultDataType=B.identifyDataType(e))),this.parameter.isInputCompatible(this.inputType)||console.error("setting value: input type [".concat(this.inputType,"] not compatible here")),this.value=e,this}}],[{key:"validate",value:function(e){var t=e.parameter,a="instantiating parameter";return t instanceof d||(console.error("".concat(a,": given object not an instance of Parameter")),!1)}}]),e}(),v=function(){function e(t){var a=t.template,n=t.name,i=void 0===n?"unnamed":n;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.template=a,this.name=i,this.values={},this.actualResultDataType=null,this.segmentsDisplay=[],this.segmentsCode=[],this.instancesQuoters=[],this.outWrap="",this.initValuesAndSegments())}return Object(p["a"])(e,[{key:"getTemplateId",value:function(){return this.template.getId()}},{key:"getTemplateName",value:function(){return this.template.getName()}},{key:"getTemplateResultDataType",value:function(){return this.template.getResultDataType()}},{key:"getName",value:function(){return this.name}},{key:"getResultDataType",value:function(){var e=this.getTemplateResultDataType();return B.isLegalDataType(e)?e:this.actualResultDataType}},{key:"getSegmentsDisplay",value:function(){return this.segmentsDisplay}},{key:"getSegmentsCode",value:function(){return this.segmentsCode}},{key:"getParamSize",value:function(){return this.template.getParamSize()}},{key:"getFirstParamIndex",value:function(){return this.template.getFirstParamIndex()}},{key:"getFirstTextIndex",value:function(){return this.template.getFirstTextIndex()}},{key:"getFirstTextNeighbors",value:function(e){var t="post"===e?1:0;return this.template.getFirstTextNeighbors()[t]}},{key:"getInstanceQuoters",value:function(){return this.instancesQuoters}},{key:"addInstanceQuoter",value:function(e){this.instancesQuoters.push(e)}},{key:"removeInstanceQuoter",value:function(e){this.instancesQuoters=this.instancesQuoters.filter((function(t){return t!==e}))}},{key:"bindInstanceQuotes",value:function(t,a){this.values[t].getValue()instanceof e&&this.values[t].getValue().removeInstanceQuoter(this),a instanceof e&&a.addInstanceQuoter(this)}},{key:"isLegitimate",value:function(){var e=this;return Object.keys(this.values).every((function(t){return e.values[t].isLegitimate()}))}},{key:"updateLegitimate",value:function(){var e=this;Object.keys(this.values).forEach((function(t){return e.values[t].updateLegitimate()}))}},{key:"updateQuotersLegitimate",value:function(){this.instancesQuoters.forEach((function(e){return e.updateLegitimate()}))}},{key:"getOutWrap",value:function(e){return!0===e&&(this.outWrap=this.outputWrapper()),this.outWrap}},{key:"setValue",value:function(e,t){return this===t?console.error("setting value: an instance's value can not be the instance itself"):this.values[e]?(this.bindInstanceQuotes(e,t),this.values[e].setValue(this.convertConstantToEnumerate(e,t)),e===this.getTemplateResultDataType()&&(this.actualResultDataType=this.values[e].getDataType()),this.updateQuotersLegitimate()):console.error("setting value: holder [".concat(e,"] not found on instance")),this.outWrap=this.outputWrapper(),this}},{key:"setFirstValue",value:function(e){return this.setValue(this.template.getFirstParam().getHolder(),e),this}},{key:"convertConstantToEnumerate",value:function(e,t){var a=this;if("object"===Object(l["a"])(t))return t;if(this.values[e].isInputCompatible(B.INPUT.ENUMERATE)){var n=null;return Object.keys(this.values).forEach((function(i){i!==e&&a.values[i].getInputType()===B.INPUT.VARIABLE&&(n=a.values[i].getValue().getEnums().find((function(e){return e.code+""===t})))})),null===n||void 0===n?t:n}return t}},{key:"outputWrapper",value:function(e){var t=this,a="display"===e?this.segmentsDisplay:this.segmentsCode;return a.map((function(a){return t.outputTextAtom(a,e,"wrapper")})).join("")}},{key:"outputText",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="display"===e?this.segmentsDisplay:this.segmentsCode;return n.map((function(n){return t.outputTextAtom(n,e,!0===a?"exp":"")})).join("")}},{key:"outputTextAtom",value:function(t,a,i){var s=this,r="",o="",l="",u="",p="",c="",d="",T="";switch(i){case"exp":u="[c]",T="[v]",c="[e]";break;case"wrapper":r=e.wrapperT[0],o=e.wrapperT[1],l=e.wrapperC[0],u=e.wrapperC[1],p=e.wrapperE[0],c=e.wrapperE[1],d=e.wrapperV[0],T=e.wrapperV[1];break;default:break}if(t instanceof m)return"".concat(r).concat(t.getContent()).concat(o);switch(t.getInputType()){case B.INPUT.CONSTANT:var h=t.getValue();return null===h?null:(t.getDataType()!==B.DATA.NUMBER&&t.getDataType()!==B.DATA.BOOLEAN&&(h="'".concat(h,"'")),"".concat(l).concat(h).concat(u));case B.INPUT.ENUMERATE:var y="display"===a?t.getValue().getLabel():t.getValue().getCode();return null===y?null:(t.getDataType()!==B.DATA.NUMBER&&t.getDataType()!==B.DATA.BOOLEAN&&(y="'".concat(y,"'")),"".concat(p).concat(y).concat(c));case B.INPUT.VARIABLE:var f="display"===a?t.getValue().getLabel():"".concat(t.getValue().getTableName(),".").concat(t.getValue().getName());return null===f?null:"".concat(d).concat(f).concat(T);case B.INPUT.INSTANCE:var v="display"===a?t.getValue().getSegmentsDisplay():t.getValue().getSegmentsCode();return["("].concat(Object(n["a"])(v.map((function(e){return s.outputTextAtom(e,a,i)}))),[")"]).join("");default:return null}}},{key:"initValuesAndSegments",value:function(){var e=this;this.values={};var t=this.template.getParams();Object.keys(t).forEach((function(a){var n=t[a];e.values[a]=new f({parameter:n})})),this.segmentsDisplay=this.template.getSegmentsDisplay().map((function(t){return e.mapSegment(t)})),this.segmentsCode=this.template.getSegmentsCode().map((function(t){return e.mapSegment(t)}))}},{key:"mapSegment",value:function(e){return e instanceof d?this.values[e.getHolder()]:e instanceof m?e:(console.error("instantiating template [".concat(this.template.getName(),"]: invalid segment")),null)}}],[{key:"validate",value:function(e){var t=e.template,a=e.name,n=void 0===a?"unnamed":a,i="instantiating template [".concat(n,"]");return t instanceof T||(console.error("".concat(i,": given object not an instance of Template")),!1)}},{key:"setWrappers",value:function(e){var t=e.wrapperText,a=void 0===t?"{t}":t,n=e.wrapperConstant,i=void 0===n?"{c}":n,s=e.wrapperEnumerate,r=void 0===s?"{e}":s,o=e.wrapperVariable,l=void 0===o?"{v}":o,u=e.wrapperInstance,p=void 0===u?"{i}":u;a.includes("{t}")||console.error("invalid wrapper for text"),i.includes("{c}")||console.error("invalid wrapper for constant"),r.includes("{e}")||console.error("invalid wrapper for enumerate"),l.includes("{v}")||console.error("invalid wrapper for variable"),p.includes("{i}")||console.error("invalid wrapper for instance"),this.wrapperT=a.split("{t}"),this.wrapperC=i.split("{c}"),this.wrapperE=r.split("{e}"),this.wrapperV=l.split("{v}"),this.wrapperI=p.split("{i}")}}]),e}();Object(c["a"])(v,"wrapperT",["",""]),Object(c["a"])(v,"wrapperC",["",""]),Object(c["a"])(v,"wrapperE",["",""]),Object(c["a"])(v,"wrapperV",["",""]),Object(c["a"])(v,"wrapperI",["",""]);var A=new Set;for(var g in i)A.add(i[g]);function b(e){return A.has(e)}function D(e){return e===i.UNCERTAIN}var N=new Set;for(var $ in r)N.add(r[$]);function w(e){return N.has(e)}function E(e){return e instanceof v?r.INSTANCE:e instanceof y?r.VARIABLE:e instanceof h?r.ENUMERATE:r.CONSTANT}var I=new Set;for(var R in s)I.add(s[R]);function O(e){return I.has(e)}var S=new Map;for(var x in o)i[x]?S.set(i[x],new RegExp(o[x])):S.set(x.toLowerCase(),new RegExp(o[x]));function M(e){return S.has(e)?S.get(e):(console.error("no such regular type: ".concat(e)),null)}function C(e,t){if(e===i.UNCERTAIN)return!0;var a=M(e);return!!a&&a.test(t)}function _(e,t){return e.every((function(e){return C(e,t)}))}function U(e){return C(i.NUMBER,e)?i.NUMBER:C(i.BOOLEAN,e)?i.BOOLEAN:C(i.DATE,e)?i.DATE:C(i.MONTH,e)?i.MONTH:C(i.YEAR,e)?i.YEAR:C(i.TIME,e)?i.TIME:C(i.GEOGRAPHY,e)?i.GEOGRAPHY:C(i.STRING,e)?i.STRING:i.UNCERTAIN}var B={DATA:i,DISTRIBUTE:s,INPUT:r,REGS:o,isLegalDataType:b,isLegalInputType:w,isLegalDistributeType:O,isUncertainDataType:D,getRegExp:M,regTest:C,regTestMulti:_,identifyDataType:U,identifyInputType:E},L={MYSQL:"mysql",MYSQL_CN:"mysql-cn"},k=[new T({id:100,name:"+",context:L.MYSQL,templateDisplay:"$1 + $2",templateCode:"$1+$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:101,name:"-",context:L.MYSQL,templateDisplay:"$1 - $2",templateCode:"$1-$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:102,name:"*",context:L.MYSQL,templateDisplay:"$1 * $2",templateCode:"$1*$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:103,name:"/",context:L.MYSQL,templateDisplay:"$1 / $2",templateCode:"$1/$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:104,name:"div",context:L.MYSQL,templateDisplay:"$1 div $2",templateCode:"$1 div $2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:105,name:"%",context:L.MYSQL,templateDisplay:"$1 % $2",templateCode:"$1 mod $2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1e3,name:"=",context:L.MYSQL,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1001,name:"≠",context:L.MYSQL,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1002,name:">",context:L.MYSQL,templateDisplay:"$1 > $2",templateCode:"$1>$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1003,name:"≥",context:L.MYSQL,templateDisplay:"$1 ≥ $2",templateCode:"$1≥$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1004,name:"<",context:L.MYSQL,templateDisplay:"$1 < $2",templateCode:"$1<$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1005,name:"≤",context:L.MYSQL,templateDisplay:"$1 ≤ $2",templateCode:"$1≤$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1006,name:"(a,b)",context:L.MYSQL,templateDisplay:"$1 (a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2 and $1!=$3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1007,name:"[a,b]",context:L.MYSQL,templateDisplay:"$1 [a,b] $2, $3",templateCode:"$1 between $2 and $3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1008,name:"(a,b]",context:L.MYSQL,templateDisplay:"$1 (a,b] $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1009,name:"[a,b)",context:L.MYSQL,templateDisplay:"$1 [a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}})],j={ops:k},P=[new T({id:200,name:"concat",context:L.MYSQL,templateDisplay:"$1 concat $2",templateCode:"concat($1,$2)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}}),new T({id:201,name:"concat3",context:L.MYSQL,templateDisplay:"$1 concat $2 concat $3",templateCode:"concat($1,$2,$3)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING}),$3:new d({dataType:B.DATA.STRING})}}),new T({id:202,name:"substr",context:L.MYSQL,templateDisplay:"$1 substring from $2",templateCode:"substring($1,$2)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]})}}),new T({id:203,name:"subfix",context:L.MYSQL,templateDisplay:"$1 substring from $2 by length $3",templateCode:"substring($1,$2,$3)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]}),$3:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]})}}),new T({id:2e3,name:"=",alias:"=.str",context:L.MYSQL,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}}),new T({id:2001,name:"≠",alias:"≠.str",context:L.MYSQL,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}})],Y={ops:P},Q=[new T({id:300,name:"and",context:L.MYSQL,templateDisplay:"$1 and $2",templateCode:"$1 and $2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN}),$2:new d({dataType:B.DATA.BOOLEAN})}}),new T({id:301,name:"or",context:L.MYSQL,templateDisplay:"$1 or $2",templateCode:"$1 or $2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN}),$2:new d({dataType:B.DATA.BOOLEAN})}}),new T({id:302,name:"not",context:L.MYSQL,templateDisplay:"not $1",templateCode:"not $1",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN})}})],G={ops:Q},F=[],V={ops:F},H=[],z={ops:H},W=[],q={ops:W},J=[],K={ops:J},Z=[],X={ops:Z},ee=[new T({id:8e3,name:"sum",context:L.MYSQL,templateDisplay:"sum($1)",templateCode:"sum($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER})}}),new T({id:8001,name:"avg",context:L.MYSQL,templateDisplay:"avg($1)",templateCode:"avg($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER})}}),new T({id:8002,name:"min",context:L.MYSQL,templateDisplay:"min($1)",templateCode:"min($1)",resultDataType:"$1",params:{$1:new d({dataType:B.DATA.UNCERTAIN})}}),new T({id:8003,name:"max",context:L.MYSQL,templateDisplay:"max($1)",templateCode:"max($1)",resultDataType:"$1",params:{$1:new d({dataType:B.DATA.UNCERTAIN})}}),new T({id:8004,name:"count",context:L.MYSQL,templateDisplay:"count($1)",templateCode:"count($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.UNCERTAIN})}})],te={ops:ee},ae=[new T({id:9e3,name:"string",context:L.MYSQL,templateDisplay:"string($1)",templateCode:"cast($1 as char)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.NUMBER})}})],ne={ops:ae},ie=[new T({id:100,name:"+",context:L.MYSQL_CN,templateDisplay:"$1 + $2",templateCode:"$1+$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:101,name:"-",context:L.MYSQL_CN,templateDisplay:"$1 - $2",templateCode:"$1-$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:102,name:"*",context:L.MYSQL_CN,templateDisplay:"$1 * $2",templateCode:"$1*$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:103,name:"/",context:L.MYSQL_CN,templateDisplay:"$1 / $2",templateCode:"$1/$2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:104,name:"整除",context:L.MYSQL_CN,templateDisplay:"$1 整除 $2",templateCode:"$1 div $2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:105,name:"取余",context:L.MYSQL_CN,templateDisplay:"$1 取余 $2",templateCode:"$1 mod $2",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1e3,name:"=",context:L.MYSQL_CN,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1001,name:"≠",context:L.MYSQL_CN,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1002,name:">",context:L.MYSQL_CN,templateDisplay:"$1 > $2",templateCode:"$1>$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1003,name:"≥",context:L.MYSQL_CN,templateDisplay:"$1 ≥ $2",templateCode:"$1≥$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1004,name:"<",context:L.MYSQL_CN,templateDisplay:"$1 < $2",templateCode:"$1<$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1005,name:"≤",context:L.MYSQL_CN,templateDisplay:"$1 ≤ $2",templateCode:"$1≤$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER})}}),new T({id:1006,name:"(a,b)",context:L.MYSQL_CN,templateDisplay:"$1 (a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2 and $1!=$3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1007,name:"[a,b]",context:L.MYSQL_CN,templateDisplay:"$1 [a,b] $2, $3",templateCode:"$1 between $2 and $3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1008,name:"(a,b]",context:L.MYSQL_CN,templateDisplay:"$1 (a,b] $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}}),new T({id:1009,name:"[a,b)",context:L.MYSQL_CN,templateDisplay:"$1 [a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$3",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.NUMBER}),$2:new d({dataType:B.DATA.NUMBER}),$3:new d({dataType:B.DATA.NUMBER})}})],se={ops:ie},re=[new T({id:200,name:"拼接",context:L.MYSQL_CN,templateDisplay:"$1 拼接 $2",templateCode:"concat($1,$2)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}}),new T({id:201,name:"二次拼接",context:L.MYSQL_CN,templateDisplay:"$1 拼接 $2 拼接 $3",templateCode:"concat($1,$2,$3)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING}),$3:new d({dataType:B.DATA.STRING})}}),new T({id:202,name:"截取前",context:L.MYSQL_CN,templateDisplay:"$1 截取前 $2 位",templateCode:"substring($1,$2)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]})}}),new T({id:203,name:"截取",context:L.MYSQL_CN,templateDisplay:"$1 截取 $2 位 长度为 $3",templateCode:"substring($1,$2,$3)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]}),$3:new d({dataType:B.DATA.NUMBER,inputTypes:[B.INPUT.CONSTANT]})}}),new T({id:2e3,name:"=",alias:"=.str",context:L.MYSQL_CN,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}}),new T({id:2001,name:"≠",alias:"≠.str",context:L.MYSQL_CN,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.STRING}),$2:new d({dataType:B.DATA.STRING})}})],oe={ops:re},le=[new T({id:300,name:"与",context:L.MYSQL,templateDisplay:"$1 与 $2",templateCode:"$1 and $2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN}),$2:new d({dataType:B.DATA.BOOLEAN})}}),new T({id:301,name:"或",context:L.MYSQL_CN,templateDisplay:"$1 或 $2",templateCode:"$1 or $2",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN}),$2:new d({dataType:B.DATA.BOOLEAN})}}),new T({id:302,name:"非",context:L.MYSQL_CN,templateDisplay:"非 $1",templateCode:"not $1",resultDataType:B.DATA.BOOLEAN,params:{$1:new d({dataType:B.DATA.BOOLEAN})}})],ue={ops:le},pe=[],ce={ops:pe},de=[],me={ops:de},Te=[],he={ops:Te},ye=[],fe={ops:ye},ve=[],Ae={ops:ve},ge=[new T({id:8e3,name:"求和",context:L.MYSQL_CN,templateDisplay:"求和($1)",templateCode:"sum($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER})}}),new T({id:8001,name:"平均值",context:L.MYSQL_CN,templateDisplay:"平均值($1)",templateCode:"avg($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.NUMBER})}}),new T({id:8002,name:"最小值",context:L.MYSQL_CN,templateDisplay:"最小值($1)",templateCode:"min($1)",resultDataType:"$1",params:{$1:new d({dataType:B.DATA.UNCERTAIN})}}),new T({id:8003,name:"最大值",context:L.MYSQL_CN,templateDisplay:"最大值($1)",templateCode:"max($1)",resultDataType:"$1",params:{$1:new d({dataType:B.DATA.UNCERTAIN})}}),new T({id:8004,name:"计数",context:L.MYSQL_CN,templateDisplay:"计数($1)",templateCode:"count($1)",resultDataType:B.DATA.NUMBER,params:{$1:new d({dataType:B.DATA.UNCERTAIN})}})],be={ops:ge},De=[new T({id:9e3,name:"转为字符串",context:L.MYSQL_CN,templateDisplay:"转为字符串($1)",templateCode:"cast($1 as char)",resultDataType:B.DATA.STRING,params:{$1:new d({dataType:B.DATA.NUMBER})}})],Ne={ops:De},$e={};$e[L.MYSQL]=[].concat(Object(n["a"])(j.ops),Object(n["a"])(Y.ops),Object(n["a"])(G.ops),Object(n["a"])(V.ops),Object(n["a"])(z.ops),Object(n["a"])(q.ops),Object(n["a"])(K.ops),Object(n["a"])(X.ops),Object(n["a"])(ne.ops),Object(n["a"])(te.ops)),$e[L.MYSQL_CN]=[].concat(Object(n["a"])(se.ops),Object(n["a"])(oe.ops),Object(n["a"])(ue.ops),Object(n["a"])(ce.ops),Object(n["a"])(me.ops),Object(n["a"])(he.ops),Object(n["a"])(fe.ops),Object(n["a"])(Ae.ops),Object(n["a"])(Ne.ops),Object(n["a"])(be.ops));var we="",Ee=[],Ie=[],Re={},Oe={},Se={},xe={},Me=[];function Ce(){return $e}function _e(){return we}function Ue(e){$e[e]?(Ee=[],Ie=[],Re={},Oe={},Se={},xe={},Me=[],we=e,Ee=$e[e],Ee.forEach((function(e){return Le(e)}))):console.error("operator context: [".concat(e,"] does not exist"))}function Be(e){e.getContext()===we&&null!==e.getAlias()&&void 0!==e.getAlias()&&""!==e.getAlias()&&(Oe[e.getAlias()]?console.error("duplicate template alias: ".concat(e.getAlias())):Oe[e.getAlias()]=e)}function Le(e){Ie.push(e),Re[e.getId()]?console.error("duplicate template id: ".concat(e.getId())):Re[e.getId()]=e,Be(e);var t=e.getResultDataType();Se[t]||(Se[t]=[]),Se[t].push(e);var a=e.getFirstParam();xe[a.getDataType()]||(xe[a.getDataType()]=[]),xe[a.getDataType()].push(e),e.isCustomized()&&Me.push(e)}function ke(e){return Oe[e]?Oe[e]:(console.error("template of alias: ".concat(e," does not exist")),null)}function je(e){return Re[e]?Re[e]:(console.error("template of id: ".concat(e," does not exist")),null)}function Pe(){return Ie}function Ye(e){return B.isLegalDataType(e)?Se[e]:(console.error("data type: ".concat(e," does not exist")),null)}function Qe(e){return B.isLegalDataType(e)?(xe[e]||[]).concat(xe[B.DATA.UNCERTAIN]||[]):(console.error("data type: ".concat(e," does not exist")),null)}function Ge(){return Me}Ue(L.MYSQL);var Fe={getContexts:Ce,getActiveContext:_e,activateContext:Ue,opById:je,opsList:Pe,opsByResult:Ye,opsToRespond:Qe,opsCustomized:Ge},Ve=(a("a9e3"),"resops");y.prototype[Ve]=function(){return Qe(this.getDataType())},h.prototype[Ve]=function(){return Qe(this.getDataType())},v.prototype[Ve]=function(){return Qe(this.getResultDataType())},String.prototype[Ve]||(String.prototype[Ve]=function(){return Qe(B.identifyDataType(this))}),Number.prototype[Ve]||(Number.prototype[Ve]=function(){return Qe(B.DATA.NUMBER)}),Boolean.prototype[Ve]||(Boolean.prototype[Ve]=function(){return Qe(type.DATA.BOOLEAN)});var He="en",ze={en:{constant:"Const",enumerate:"Enum",variable:"Field",instance:"Inst"},cn:{constant:"常量",enumerate:"枚举",variable:"字段",instance:"式"}};function We(e){He=e}function qe(){return ze[He]}var Je={switchTo:We,getAbbr:qe},Ke="abbr";String.prototype[Ke]||(String.prototype[Ke]=function(){return Je.getAbbr()[this]||this});var Ze=function(){function e(t){var a=t.id,n=t.name,i=t.label,s=t.hint,r=void 0===s?"":s;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.label=i,this.hint=r,this.fields=[],this.mapFieldsName={})}return Object(p["a"])(e,[{key:"addFields",value:function(e){var t=this,a="adding fields for [".concat(this.name,"]");return e.forEach((function(e){e instanceof y?1===t.mapFieldsName[e.getName()]?console.error("".concat(a,": field ").concat(e.getName()," already exists for table ").concat(t.name)):(t.mapFieldsName[e.getName()]=1,t.fields.push(e.setTableId(t.id).setTableName(t.name))):console.error("".concat(a,": given object not an instance of Field"))})),this}},{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getHint",value:function(){return this.hint}},{key:"getFields",value:function(){return this.fields}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.label,e.hint,"defining table [".concat(a,"]"));return!(!t&&0!==t||!a)||(console.error("".concat(n,": missing information")),!1)}}]),e}(),Xe=0,et=Xe,tt={},at=[],nt=[];function it(){Xe++}function st(e){at.push(e),Xe++}function rt(e){nt.push(e),Xe++}function ot(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return Xe!==et&&(lt(),et=Xe),""===e?null:""===t?tt["".concat(e)]||null:""===a?tt["".concat(e,".").concat(t)]||null:tt["".concat(e,".").concat(t,".").concat(a)]||null}function lt(){tt={},nt.forEach((function(e){var t="".concat(e.getName());tt[t]?console.error("duplicate table: ".concat(t)):(tt[t]=e,e.getFields().forEach((function(t){var a="".concat(e.getName(),".").concat(t.getName());tt[a]?console.error("duplicate field: ".concat(a)):(tt[a]=t,t.getEnums().forEach((function(a){var n="".concat(e.getName(),".").concat(t.getName(),".").concat(a.getCode());tt[n]?console.error("duplicate enum: ".concat(n)):tt[n]=a})))})))}))}function ut(){Xe=0,et=Xe,tt={},at=[],nt=[],lt()}function pt(){at=[new y({id:1e3,name:"USER_ID",label:"UserId",dataType:B.DATA.STRING}),new y({id:1001,name:"USER_NAME",label:"UserName",dataType:B.DATA.STRING}),new y({id:1002,name:"AGE",label:"Age",dataType:B.DATA.NUMBER,distributeType:B.DISTRIBUTE.METRICS,unit:"years"}),new y({id:1003,name:"GENDER",label:"Gender",dataType:B.DATA.NUMBER,distributeType:B.DISTRIBUTE.CATEGORY}).addEnums([new h({id:100001,code:0,label:"Male"}),new h({id:100002,code:1,label:"Female"})])],nt=[new Ze({id:100,name:"PERSON_INFO",label:"Personal information"}).addFields(at)],lt()}function ct(){return at}function dt(){return nt}ut();var mt={fieldsList:ct,tablesList:dt,clear:ut,useExample:pt},Tt=a("8b83"),ht=a("c65a"),yt=a("9aa6"),ft=a("c03e"),vt=100,At=vt,gt=function(e){function t(e){var a,n=e.name,i=e.label,s=e.hint;return Object(u["a"])(this,t),a=Object(Tt["a"])(this,Object(ht["a"])(t).call(this,{id:At,name:n,label:i,hint:s})),At++,rt(Object(yt["a"])(a)),a}return Object(ft["a"])(t,e),t}(Ze),bt=function(e){function t(e){var a,n=e.name,i=e.label,s=e.hint,r=e.dataType,o=e.distributeType,l=e.unit;return Object(u["a"])(this,t),a=Object(Tt["a"])(this,Object(ht["a"])(t).call(this,{id:At,name:n,label:i,hint:s,dataType:r,distributeType:o,unit:l})),At++,st(Object(yt["a"])(a)),a}return Object(ft["a"])(t,e),t}(y),Dt=function(e){function t(e){var a,n=e.code,i=e.label;return Object(u["a"])(this,t),a=Object(Tt["a"])(this,Object(ht["a"])(t).call(this,{id:At,code:n,label:i})),At++,it(),a}return Object(ft["a"])(t,e),t}(h);a.d(t,"f",(function(){return ke})),a.d(t,"g",(function(){return Fe})),a.d(t,"i",(function(){return B})),a.d(t,"a",(function(){return ot})),a.d(t,"e",(function(){return mt})),a.d(t,"d",(function(){return v})),a.d(t,"h",(function(){return gt})),a.d(t,"c",(function(){return bt})),a.d(t,"b",(function(){return Dt})),a.d(t,"j",(function(){return Je}))},2681:function(e,t,a){},"3ac9":function(e,t,a){},4805:function(e,t,a){"use strict";var n=a("8ce0"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/demo-en"}},[e._v("English")]),e._v(" | "),a("router-link",{attrs:{to:"/demo-cn"}},[e._v("中文")])],1),a("router-view")],1)},s=[],r=(a("034f"),a("2877")),o={},l=Object(r["a"])(o,i,s,!1,null,null,null),u=l.exports,p=(a("d3b7"),a("8c4f")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:a("cf05")}}),n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},d=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),e._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],h={name:"HelloWorld",props:{msg:String}},y=h,f=(a("4805"),Object(r["a"])(y,m,T,!1,null,"b9167eee",null)),v=f.exports,A={name:"home",components:{HelloWorld:v}},g=A,b=Object(r["a"])(g,c,d,!1,null,null,null),D=b.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.allInsts,(function(t,n){return a("div",[a("expression-atom",{attrs:{name:"式"+(n+1),variables:e.fields,instances:e.providedInsts[n]},on:{alter:function(t){return e.alterInst(t,n)}}}),a("expression-note",{attrs:{instance:t,mode:"code",prefix:"MYSQL: "}}),a("expression-note",{attrs:{instance:t,mode:"display",prefix:"说明: "}})],1)})),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px"},on:{click:e.addInst}},[e._v("+")])],2)},$=[],w=(a("4160"),a("fb6a"),a("159b"),a("284c")),E=a("8c5b"),I=a("8c97"),R=a("13e6"),O={name:"demo-cn",components:{ExpressionAtom:E["a"],ExpressionNote:I["a"]},data:function(){return{fields:[],allInsts:[null,null],providedInsts:[]}},computed:{},mounted:function(){var e=this;R["j"].switchTo("cn"),R["g"].activateContext("mysql-cn");var t=[new R["h"]({name:"USER_INFO_DIM",label:"用户信息维表"}).addFields([new R["c"]({name:"USER_ID",label:"用户ID",dataType:"string"}),new R["c"]({name:"USER_NAME",label:"用户名称",dataType:"string"}),new R["c"]({name:"AGE",label:"年龄",dataType:"number",distributeType:"metrics",unit:"岁"}),new R["c"]({name:"GENDER",label:"性别",dataType:"number",distributeType:"category"}).addEnums([new R["b"]({code:0,label:"男"}),new R["b"]({code:1,label:"女"})])]),new R["h"]({name:"COMMODITY_INFO_DIM",label:"商品信息维表"}).addFields([new R["c"]({name:"COMMODITY_ID",label:"商品ID",dataType:"string"}),new R["c"]({name:"COMMODITY_NAME",label:"商品名称",dataType:"string"}),new R["c"]({name:"UNIT_PRICE",label:"单价",dataType:"number",distributeType:"metrics",unit:"元"})]),new R["h"]({name:"COMMODITY_PURCHASE_LOG",label:"商品购买记录表"}).addFields([new R["c"]({name:"COMMODITY_ID",label:"商品ID(禁用)",dataType:"string"}),new R["c"]({name:"USER_ID",label:"用户ID(禁用)",dataType:"string"}),new R["c"]({name:"QUANTITY",label:"交易数量",dataType:"number",distributeType:"metrics",unit:"个"}),new R["c"]({name:"DISCOUNT",label:"折扣",dataType:"string",distributeType:"category"}).addEnums([new R["b"]({code:"none",label:"无折扣"}),new R["b"]({code:"0.8-all",label:"总价8折"}),new R["b"]({code:"0.5-sec",label:"第2个半价"}),new R["b"]({code:"free",label:"白给"})])])];this.fields=[],t.forEach((function(t){var a;(a=e.fields).push.apply(a,Object(w["a"])(t.getFields()))}))},methods:{alterInst:function(e,t){this.allInsts[t]=e,this.updateProvided()},addInst:function(){this.allInsts.push(null),this.updateProvided()},updateProvided:function(){var e=this;this.$nextTick((function(){var t=[];e.allInsts.length;e.allInsts.forEach((function(a,n){t.push(e.allInsts.slice(0,n))})),e.providedInsts=t}))}},watch:{}},S=O,x=Object(r["a"])(S,N,$,!1,null,"1df5d222",null),M=x.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e._l(e.allInsts,(function(t,n){return a("div",[a("expression-atom",{attrs:{name:"Inst-"+(n+1),variables:e.fields,instances:e.providedInsts[n]},on:{alter:function(t){return e.alterInst(t,n)}}}),a("expression-note",{attrs:{instance:t,mode:"code",prefix:"MYSQL: "}})],1)})),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px"},on:{click:e.addInst}},[e._v("+")])],2)},_=[],U={name:"demo-en",components:{ExpressionAtom:E["a"],ExpressionNote:I["a"]},data:function(){return{fields:[],allInsts:[null,null],providedInsts:[]}},computed:{},mounted:function(){var e=this;R["j"].switchTo("en"),R["g"].activateContext("mysql-cn");var t=[new R["h"]({name:"USER_INFO",label:"users' basic info"}).addFields([new R["c"]({name:"USER_ID",label:"user id",dataType:"string"}),new R["c"]({name:"USER_NAME",label:"user name",dataType:"string"}),new R["c"]({name:"AGE",label:"age",dataType:"number",distributeType:"metrics",unit:"year"}),new R["c"]({name:"GENDER",label:"gender",dataType:"number",distributeType:"category"}).addEnums([new R["b"]({code:0,label:"male"}),new R["b"]({code:1,label:"female"})])]),new R["h"]({name:"COMMODITY_INFO",label:"commodities' info"}).addFields([new R["c"]({name:"COMMODITY_ID",label:"commodity id",dataType:"string"}),new R["c"]({name:"COMMODITY_NAME",label:"commodity name",dataType:"string"}),new R["c"]({name:"UNIT_PRICE",label:"unit price",dataType:"number",distributeType:"metrics",unit:"USD"})]),new R["h"]({name:"COMMODITY_PURCHASE_LOG",label:"commodities' transaction"}).addFields([new R["c"]({name:"COMMODITY_ID",label:"commodity id (disabled)",dataType:"string"}),new R["c"]({name:"USER_ID",label:"user id (disabled)",dataType:"string"}),new R["c"]({name:"QUANTITY",label:"quantity",dataType:"number",distributeType:"metrics",unit:"unit"}),new R["c"]({name:"DISCOUNT",label:"discount",dataType:"string",distributeType:"category"}).addEnums([new R["b"]({code:"none",label:"no discount"}),new R["b"]({code:"0.8-all",label:"20% off for total"}),new R["b"]({code:"0.5-sec",label:"50% off for the second"}),new R["b"]({code:"free",label:"free"})])])];this.fields=[],t.forEach((function(t){var a;(a=e.fields).push.apply(a,Object(w["a"])(t.getFields()))}))},methods:{alterInst:function(e,t){this.allInsts[t]=e,this.updateProvided()},addInst:function(){this.allInsts.push(null),this.updateProvided()},updateProvided:function(){var e=this;this.$nextTick((function(){var t=[];e.allInsts.length;e.allInsts.forEach((function(a,n){t.push(e.allInsts.slice(0,n))})),e.providedInsts=t}))}},watch:{}},B=U,L=Object(r["a"])(B,C,_,!1,null,"2d02b6de",null),k=L.exports;n["a"].use(p["a"]);var j=[{path:"/",redirect:"/demo-cn"},{path:"/home",name:"home",component:D},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/test1",name:"test1",component:function(){return a.e("chunk-8a635936").then(a.bind(null,"b65d"))}},{path:"/test2",name:"test2",component:function(){return a.e("chunk-6c734d7e").then(a.bind(null,"1c79"))}},{path:"/test3",name:"test3",component:function(){return a.e("chunk-2d0e55bf").then(a.bind(null,"93c2"))}},{path:"/demo-en",name:"demo-en",component:k},{path:"/demo-cn",name:"demo-cn",component:M}],P=new p["a"]({routes:j}),Y=P,Q=a("2f62");n["a"].use(Q["a"]);var G=new Q["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:Y,store:G,render:function(e){return e(u)}}).$mount("#app")},"5c35":function(e,t,a){"use strict";var n=a("73d8"),i=a.n(n);i.a},"73d8":function(e,t,a){},"76b1":function(e,t,a){},"85ec":function(e,t,a){},"8c5b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.instance?a("div",{staticClass:"line"},[a("plain",{attrs:{text:e.name+":"}}),e._l(e.instance.getSegmentsDisplay(),(function(t,n){return a("div",{staticClass:"seg"},[n===e.instance.getFirstParamIndex()?a("subject",{attrs:{init:e.subject,variables:e.variables,instances:e.instances},on:{alter:e.alterSubject}}):n===e.instance.getFirstTextIndex()?a("div",{staticClass:"predicate-group"},[a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:e.instance.getFirstTextNeighbors("pre")}}),a("predicate",{attrs:{init:e.predicate,subject:e.subject},on:{alter:e.alterPredicate}}),a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:e.instance.getFirstTextNeighbors("post")}})],1):t.hasOwnProperty("value")?a("adverbial",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{parameter:t,subject:e.subject,variables:e.variables,instances:e.instances},on:{alter:e.alterAdverbial}}):null!==t.content&&""!==t.content.trim()?a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:t.content.trim()}}):e._e()],1)})),e.instance.isLegitimate()?a("plain",{attrs:{symbol:"right"}}):a("plain",{attrs:{symbol:"wrong"}})],2):a("div",{staticClass:"line"},[a("plain",{attrs:{text:e.name+":"}}),a("subject",{attrs:{variables:e.variables,instances:e.instances},on:{alter:e.alterSubject}}),a("predicate",{attrs:{subject:e.subject},on:{alter:e.alterPredicate}})],1)])},i=[],s=(a("b0c0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",class:[e.onSwitch?"long":"short"],on:{mouseenter:e.showSwitch,mouseleave:e.hideSwitch}},["constant"===e.curInputType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"variable"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.variables,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"instance"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedInstances,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0):e._e(),e.inputTypes[e.inputIndex-1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"t",on:{click:function(t){return e.changeInputType(-1)}}},[e._v(" ▲"+e._s(e.inputTypes[e.inputIndex-1].abbr())+" ")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"m"},[e._v(" "+e._s(e.inputTypes[e.inputIndex].abbr())+" ")]),e.inputTypes[e.inputIndex+1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"b",on:{click:function(t){return e.changeInputType(1)}}},[e._v(" ▼"+e._s(e.inputTypes[e.inputIndex+1].abbr())+" ")]):e._e()])}),r=[],o=(a("4de4"),a("c975"),a("13e6")),l=[o["i"].INPUT.CONSTANT,o["i"].INPUT.VARIABLE,o["i"].INPUT.INSTANCE],u={name:"Subject",data:function(){return{doEmit:!0,onSwitch:!1,inputTypes:l,inputIndex:0,value:null}},props:["init","variables","instances"],computed:{curInputType:function(){return this.inputTypes[this.inputIndex]},matchedInstances:function(){return this.instances?this.instances.filter((function(e){return null!==e})):[]}},mounted:function(){null!==this.init&&void 0!==this.init&&(this.inputIndex=this.inputTypes.indexOf(o["i"].identifyInputType(this.init)),this.doEmit=!1,this.value=this.init)},methods:{changeInputType:function(e){this.value=null,this.inputIndex+=e},showSwitch:function(){this.onSwitch=!0},hideSwitch:function(){this.onSwitch=!1}},watch:{value:function(e){this.doEmit?this.$emit("alter",e):this.doEmit=!0}}},p=u,c=(a("5c35"),a("2877")),d=Object(c["a"])(p,s,r,!1,null,"532b072d",null),m=d.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.operators,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0)])},h=[],y={name:"Predicate",data:function(){return{doEmit:!0,operators:[],value:null}},props:["init","subject"],mounted:function(){null!==this.init&&void 0!==this.init&&(null!==this.subject&&void 0!==this.subject&&(this.operators=this.subject.resops()),this.doEmit=!1,this.value=this.init)},methods:{},watch:{subject:function(e){null!==e&&void 0!==e&&(this.operators=e.resops(),this.value=null)},value:function(e){this.doEmit?this.$emit("alter",e):this.doEmit=!0},init:function(e){null===e&&(null!==this.subject&&void 0!==this.subject?this.operators=this.subject.resops():this.operators=[],this.value=null)}}},f=y,v=(a("a7dc"),Object(c["a"])(f,T,h,!1,null,"2d71a87a",null)),A=v.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",class:[e.onSwitch?"long":"short"],on:{mouseenter:e.showSwitch,mouseleave:e.hideSwitch}},["constant"===e.curInputType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"enumerate"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.enums,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"variable"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedVariables,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"instance"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedInstances,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0):e._e(),e.inputTypes[e.inputIndex-1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"t",on:{click:function(t){return e.changeInputType(-1)}}},[e._v(" ▲"+e._s(e.inputTypes[e.inputIndex-1].abbr())+" ")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"m"},[e._v(" "+e._s(e.inputTypes[e.inputIndex].abbr())+" ")]),e.inputTypes[e.inputIndex+1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"b",on:{click:function(t){return e.changeInputType(1)}}},[e._v(" ▼"+e._s(e.inputTypes[e.inputIndex+1].abbr())+" ")]):e._e()])},b=[],D=(a("caad"),a("2532"),[o["i"].INPUT.CONSTANT,o["i"].INPUT.ENUMERATE,o["i"].INPUT.VARIABLE,o["i"].INPUT.INSTANCE]),N={name:"Adverbial",data:function(){return{onSwitch:!1,inputTypes:D,inputIndex:0,enums:[],value:null}},props:["parameter","subject","variables","instances"],computed:{curInputType:function(){return this.inputTypes[this.inputIndex]},matchedVariables:function(){var e=this;return this.variables?this.variables.filter((function(t){return t.getDataType()===e.parameter.getDataType()})):[]},matchedInstances:function(){return this.instances?this.instances.filter((function(e){return null!==e})):[]}},created:function(){var e=this;this.parameter.isInputCompatible(o["i"].INPUT.ENUMERATE)&&o["i"].identifyInputType(this.subject)===o["i"].INPUT.VARIABLE&&this.subject.getEnums().length>0&&(this.enums=this.subject.getEnums()),this.inputTypes=this.inputTypes.filter((function(t){return e.parameter.getCompatibleInputTypes().includes(t)})),0===this.enums.length&&(this.inputTypes=this.inputTypes.filter((function(e){return e!==o["i"].INPUT.ENUMERATE})))},mounted:function(){},methods:{changeInputType:function(e){this.value=null,this.inputIndex+=e},showSwitch:function(){this.onSwitch=!0},hideSwitch:function(){this.onSwitch=!1}},watch:{value:function(e){this.$emit("alter",e,this.parameter.getHolder())}}},$=N,w=(a("c466"),Object(c["a"])($,g,b,!1,null,"090c8dba",null)),E=w.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",style:"width:"+e.width+"px"},["right"===e.symbol?a("span",{ref:"span"},[e._v("✓")]):"wrong"===e.symbol?a("span",{ref:"span",staticStyle:{color:"red"}},[e._v("✗")]):a("span",{ref:"span"},[e._v(e._s(e.text))])])},R=[],O={name:"Plain",data:function(){return{width:0}},props:["text","symbol"],mounted:function(){this.width=this.$refs.span.clientWidth},methods:{}},S=O,x=(a("d548"),Object(c["a"])(S,I,R,!1,null,"d9a10252",null)),M=x.exports,C={name:"ExpressionAtom",components:{Subject:m,Predicate:A,Adverbial:E,Plain:M},data:function(){return{subject:null,predicate:null,instance:null}},props:["name","variables","instances"],computed:{},created:function(){},mounted:function(){},methods:{alterSubject:function(e){this.subject=e,this.predicate=null},alterPredicate:function(e){var t=this;this.predicate=e,null!==e&&void 0!==e&&(this.instance=null,this.$nextTick((function(){t.instance=new o["d"]({template:e,name:t.name}).setFirstValue(t.subject)})))},alterAdverbial:function(e,t){this.instance.setValue(t,e)}},watch:{instance:{deep:!0,handler:function(e){null!==e&&this.$emit("alter",e)}}}},_=C,U=(a("b462"),Object(c["a"])(_,n,i,!1,null,"25a98733",null));t["a"]=U.exports},"8c97":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{domProps:{textContent:e._s(e.prefix)}}),"wrapper"===e.realMode?a("span",{domProps:{innerHTML:e._s(e.html)}}):a("span",{domProps:{textContent:e._s(e.text)}})])},i=[],s=(a("caad"),{name:"ExpressionNote",data:function(){return{text:"",html:""}},props:["instance","mode","prefix"],computed:{realMode:function(){return["wrapper","code"].includes(this.mode)?this.mode:"display"}},mounted:function(){},methods:{},watch:{instance:{deep:!0,handler:function(e){null!==e&&("wrapper"===this.realMode?(this.text="",this.html=e.getOutWrap(!0)):(this.text=e.outputText(this.realMode),this.html=""))}}}}),r=s,o=a("2877"),l=Object(o["a"])(r,n,i,!1,null,"52ea90db",null);t["a"]=l.exports},"8ce0":function(e,t,a){},"9a30":function(e,t,a){},a7dc:function(e,t,a){"use strict";var n=a("9a30"),i=a.n(n);i.a},b462:function(e,t,a){"use strict";var n=a("2681"),i=a.n(n);i.a},c466:function(e,t,a){"use strict";var n=a("3ac9"),i=a.n(n);i.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d548:function(e,t,a){"use strict";var n=a("76b1"),i=a.n(n);i.a}});
//# sourceMappingURL=app.b1d4088d.js.map