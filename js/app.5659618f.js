(function(e){function t(t){for(var n,i,o=t[0],l=t[1],u=t[2],c=0,p=[];c<o.length;c++)i=o[c],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&p.push(s[i][0]),s[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,u||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==s[o]&&(n=!1)}n&&(r.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},i={app:0},s={app:0},r=[];function o(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"8c8a39cb","chunk-2d0e55bf":"c9bf1d86","chunk-2d21726c":"d4c57a5d","chunk-6c734d7e":"8fd060bf","chunk-8a635936":"900976c4"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.e=function(e){var t=[],a={"chunk-6c734d7e":1,"chunk-8a635936":1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"31d6cfe0","chunk-2d0e55bf":"31d6cfe0","chunk-2d21726c":"31d6cfe0","chunk-6c734d7e":"37ba9444","chunk-8a635936":"c4debf92"}[e]+".css",s=l.p+n,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var u=r[o],c=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(c===n||c===s))return t()}var p=document.getElementsByTagName("style");for(o=0;o<p.length;o++){u=p[o],c=u.getAttribute("data-href");if(c===n||c===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete i[e],d.parentNode.removeChild(d),a(r)},d.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=r);var u,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=o(e);var p=new Error;u=function(t){c.onerror=c.onload=null,clearTimeout(d);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;p.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",p.name="ChunkLoadError",p.type=n,p.request=i,a[1](p)}s[e]=void 0}};var d=setTimeout((function(){u({type:"timeout",target:c})}),12e4);c.onerror=c.onload=u,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var p=0;p<u.length;p++)t(u[p]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),i=a.n(n);i.a},"13e6":function(e,t,a){"use strict";a("99af"),a("4160"),a("159b");var n=a("284c"),i=(a("a623"),a("4ec9"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("6062"),a("3ca3"),a("ddb0"),{NUMBER:"number",STRING:"string",BOOLEAN:"boolean",DATE:"date",MONTH:"month",YEAR:"year",TIME:"time",GEOGRAPHY:"geography",UNCERTAIN:"uncertain"}),s={CATEGORY:"category",METRICS:"metrics",NONE:"none"},r={CONSTANT:"constant",ENUMERATE:"enumerate",VARIABLE:"variable",INSTANCE:"instance"},o={$:/\$\d{1}/g,LOGIC:/[&\|()]/g,NUMBER:/^(-)?\d+(\.\d+)?$/,STRING:/^[\u4e00-\u9fa5_a-zA-Z0-9,#.-]+$/,BOOLEAN:/^(true|false)$/,DATE:/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$/,MONTH:/^[0-9]{4}-(0[123456789]|(10|11|12))$/,YEAR:/^[0-9]{4}$/,TIME:/^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30))) (0\d{1}|1\d{1}|2[0-3]):[0-5]\d{1}:[0-5]\d{1}$/,GEOGRAPHY:/ /},l=(a("4de4"),a("7db0"),a("caad"),a("277d"),a("a15b"),a("d81d"),a("b0c0"),a("b64b"),a("2532"),a("1276"),a("bf2d")),u=a("9f12"),c=a("53fe"),p=a("2fa7"),d=(a("a630"),a("c975"),a("466d"),a("498a"),function(){function e(t){var a=t.dataType,n=t.inputTypes,i=void 0===n?[]:n,s=t.regulations,r=void 0===s?[]:s,o=t.multiple,l=void 0!==o&&o;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.templateId=null,this.holder=null,this.dataType=a,this.inputTypes=0===i.length?[k.INPUT.CONSTANT,k.INPUT.ENUMERATE,k.INPUT.VARIABLE,k.INPUT.INSTANCE]:i,this.regulations=0===r.length?[a]:r,this.multiple=l)}return Object(c["a"])(e,[{key:"getTemplateId",value:function(){return this.templateId}},{key:"getHolder",value:function(){return this.holder}},{key:"getDataType",value:function(){return this.dataType}},{key:"getCompatibleInputTypes",value:function(){return this.inputTypes}},{key:"isInputCompatible",value:function(e){if(k.isLegalInputType(e))return this.inputTypes.includes(e);console.error("checking compatibility: input type [".concat(e,"] does not exist"))}},{key:"getRegulations",value:function(){return this.regulations}},{key:"isMultiple",value:function(){return this.multiple}},{key:"setTemplateId",value:function(e){this.templateId=e}},{key:"setHolder",value:function(e){this.holder=e}}],[{key:"validate",value:function(e){var t=e.dataType,a=e.inputTypes,n=void 0===a?[]:a,i=e.regulations,s=void 0===i?[]:i,r=(e.multiple,"defining parameter");return k.isLegalDataType(t)?n.every((function(e){return k.isLegalInputType(e)}))?!!s.every((function(e){return k.isLegalDataType(e)}))||(console.error("".concat(r,": regular type does not exist")),!1):(console.error("".concat(r,": input type does not exist")),!1):(console.error("".concat(r,": data type can not be [").concat(t,"]")),!1)}}]),e}()),m=function(){function e(t){var a=t.templateId,n=t.index,i=t.content;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.templateId=a,this.index=n,this.content=i)}return Object(c["a"])(e,[{key:"getContent",value:function(){return this.content}}],[{key:"validate",value:function(e){var t=e.templateId,a=e.index,n=e.content;return!(!t&&0!==t||!a&&0!==a||!n||""===n.trim())||(console.error("defining text: missing information"),!1)}}]),e}(),T=function(){function e(t){var a=t.id,n=t.name,i=t.alias,s=void 0===i?n:i,r=t.context,o=void 0===r?"uncontexted":r,l=t.templateDisplay,c=t.templateCode,p=t.resultDataType,d=t.params,m=void 0===d?{}:d,T=t.customized,y=void 0!==T&&T;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.alias=s,this.context=o,this.templateDisplay=l,this.templateCode=c,this.resultDataType=p,this.customized=y,this.params=m,this.paramSize=0,this.syncParameters(),this.segmentsDisplay=this.initSegments(this.templateDisplay),this.segmentsCode=this.initSegments(this.templateCode),this.firstParam=null,this.firstParamIndex=null,this.firstTextIndex=null,this.firstTextNeighbors=null,this.initGrammatical())}return Object(c["a"])(e,[{key:"getId",value:function(){return this.id}},{key:"getName",value:function(){return this.name}},{key:"getAlias",value:function(){return this.alias}},{key:"getContext",value:function(){return this.context}},{key:"getParams",value:function(){return this.params}},{key:"getSegmentsDisplay",value:function(){return this.segmentsDisplay}},{key:"getSegmentsCode",value:function(){return this.segmentsCode}},{key:"getResultDataType",value:function(){return this.resultDataType}},{key:"getParamSize",value:function(){return this.paramSize}},{key:"isBool",value:function(){return this.resultDataType===k.DATA.BOOLEAN}},{key:"isCustomized",value:function(){return this.customized}},{key:"getFirstParam",value:function(){return this.firstParam}},{key:"getFirstParamIndex",value:function(){return this.firstParamIndex}},{key:"getFirstTextIndex",value:function(){return this.firstTextIndex}},{key:"getFirstTextNeighbors",value:function(){return this.firstTextNeighbors}},{key:"setAlias",value:function(e){this.alias=e}},{key:"syncParameters",value:function(){var e=this,t=0;Object.keys(this.params).forEach((function(a){t++,e.params[a].setTemplateId(e.id),e.params[a].setHolder(a)})),this.paramSize=t}},{key:"initSegments",value:function(e){var t=this,a=[],n=e.split(k.REGS.$),i=e.match(k.REGS.$),s=0,r=0;return n.forEach((function(e){""!==e&&a.push(new m({templateId:t.id,index:s++,content:e})),r<i.length&&(a.push(t.params[i[r]]),r++)})),a}},{key:"initGrammatical",value:function(){this.firstParam=this.segmentsDisplay.find((function(e){return"function"===typeof e.getHolder})),this.firstParamIndex=this.segmentsDisplay.indexOf(this.firstParam),this.firstTextIndex=0===this.firstParamIndex?1:0,this.segmentsDisplay[this.firstTextIndex].getContent().includes(this.name)?this.firstTextNeighbors=this.segmentsDisplay[this.firstTextIndex].getContent().split(this.name).map((function(e){return e.trim()})):this.firstTextNeighbors=["",this.segmentsDisplay[this.firstTextIndex].getContent()].map((function(e){return e.trim()}))}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.alias,e.context,e.templateDisplay),i=e.templateCode,s=e.resultDataType,r=e.params,o=void 0===r?{}:r,l=(e.customized,"defining template [".concat(a,"]"));if(!t&&0!==t||!a||!n||!i)return console.error("".concat(l,": missing information")),!1;if(!k.isLegalDataType(s)&&!o[s])return console.error("".concat(l,": result data type can not be [").concat(s,"]")),!1;var u=new Set(n.match(k.REGS.$)),c=new Set(i.match(k.REGS.$)),p=new Set;return Object.keys(o).forEach((function(e){if(!(o[e]instanceof d))return console.error("".concat(l,": given object not an instance of Parameter")),!1;p.add(e)})),u.size!==c.size||u.size!==p.size?(console.error("".concat(l,": unmatched parameter(s)")),!1):!!Array.from(p).every((function(e){return u.has(e)&&c.has(e)}))||(console.error("".concat(l,": unmatched parameter(s)")),!1)}}]),e}(),y=(a("45fc"),function(){function e(t){var a=t.id,n=t.code,i=t.label;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.code=n,this.label=i,this.fieldId=null,this.dataType=null)}return Object(c["a"])(e,[{key:"setFieldId",value:function(e){return this.fieldId=e,this}},{key:"setDataType",value:function(e){return this.dataType=e,this}},{key:"getCode",value:function(){return this.code}},{key:"getLabel",value:function(){return this.label}},{key:"getFieldId",value:function(){return this.fieldId}},{key:"getDataType",value:function(){return this.dataType}}],[{key:"validate",value:function(e){var t=e.id,a=e.code,n=e.label,i="defining enum [".concat(n,"]");return!(!t&&0!==t||!a&&0!==a||!n)||(console.error("".concat(i,": missing information")),!1)}}]),e}()),h=function(){function e(t){var a=t.id,n=t.name,i=t.label,s=t.hint,r=void 0===s?"":s,o=t.dataType,l=t.distributeType,c=void 0===l?k.DISTRIBUTE.NONE:l,p=t.unit;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.label=i,this.hint=r,this.tableId=null,this.tableName=null,this.dataType=o,this.distributeType=c,this.unit=p,this.enums=[],this.mapEnumsCode={})}return Object(c["a"])(e,[{key:"addEnums",value:function(e){var t=this,a="adding enums for [".concat(this.name,"]");return this.distributeType===k.DISTRIBUTE.CATEGORY?e.forEach((function(e){e instanceof y?1===t.mapEnumsCode[e.getCode()]?console.error("".concat(a,": enum ").concat(e.getCode()," already exists for field ").concat(t.name)):(t.mapEnumsCode[e.getCode()]=1,t.enums.push(e.setFieldId(t.id).setDataType(t.dataType))):console.error("".concat(a,": given object not an instance of Enum"))})):console.error("".concat(a,": can not have enums because it is not a category")),this}},{key:"setTableId",value:function(e){return this.tableId=e,this}},{key:"setTableName",value:function(e){return this.tableName=e,this}},{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getHint",value:function(){return this.hint}},{key:"getTableId",value:function(){return this.tableId}},{key:"getTableName",value:function(){return this.tableName}},{key:"getDataType",value:function(){return this.dataType}},{key:"getDistributeType",value:function(){return this.distributeType}},{key:"getUnit",value:function(){return this.unit}},{key:"getEnums",value:function(){return this.enums}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.label,e.hint,e.dataType),i=e.distributeType,s=void 0===i?k.DISTRIBUTE.NONE:i,r=(e.unit,"defining field [".concat(a,"]"));return!t&&0!==t||!a?(console.error("".concat(r,": missing information")),!1):k.isLegalDataType(n)?!!k.isLegalDistributeType(s)||(console.error("".concat(r,": distribute type can not be [").concat(s,"]")),!1):(console.error("".concat(r,": data type can not be [").concat(n,"]")),!1)}}]),e}(),v=function(){function e(t){var a=t.parameter;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.parameter=a,this.inputType=k.INPUT.CONSTANT,this.value=null,this.legitimate=!1,this.actualResultDataType=null)}return Object(c["a"])(e,[{key:"getHolder",value:function(){return this.parameter.getHolder()}},{key:"getParameterDataType",value:function(){return this.parameter.getDataType()}},{key:"getDataType",value:function(){var e=this.getParameterDataType();return k.isUncertainDataType(e)?this.actualResultDataType:e}},{key:"getCompatibleInputTypes",value:function(){return this.parameter.getCompatibleInputTypes()}},{key:"isInputCompatible",value:function(e){return this.parameter.isInputCompatible(e)}},{key:"getRegulations",value:function(){return this.parameter.getRegulations()}},{key:"isMultiple",value:function(){return this.parameter.isMultiple()}},{key:"getInputType",value:function(){return this.inputType}},{key:"getValue",value:function(){return this.value}},{key:"isLegitimate",value:function(){return this.legitimate}},{key:"updateLegitimate",value:function(){var e=k.isUncertainDataType(this.getParameterDataType());this.value instanceof f&&(this.legitimate=(this.parameter.getDataType()===this.value.getResultDataType()||e)&&this.value.isLegitimate())}},{key:"setValue",value:function(e){var t=this;if(this.isMultiple())Array.isArray(e)||console.error("setting value: an array is required here but ".concat(e," is not")),e.some((function(e){return k.identifyInputType(e)===k.INPUT.VARIABLE||k.identifyInputType(e)===k.INPUT.INSTANCE}))&&console.error("setting value: only enumerates or constants are allowed"),e.length>0?e[0]instanceof y?(this.inputType=k.INPUT.ENUMERATE,this.legitimate=e.every((function(e){return k.regTestMulti(t.getRegulations(),e.getCode())}))):(this.inputType=k.INPUT.CONSTANT,this.legitimate=e.every((function(e){return k.regTestMulti(t.getRegulations(),e)}))):this.inputType=k.INPUT.CONSTANT,this.value=e;else{var a=k.isUncertainDataType(this.getParameterDataType());e instanceof h?(this.inputType=k.INPUT.VARIABLE,this.legitimate=this.parameter.getDataType()===e.getDataType(),a&&(this.actualResultDataType=e.getDataType(),this.legitimate=!0)):e instanceof f?(this.inputType=k.INPUT.INSTANCE,this.legitimate=this.parameter.getDataType()===e.getResultDataType()&&e.isLegitimate(),a&&(this.actualResultDataType=e.getResultDataType(),this.legitimate=e.isLegitimate())):e instanceof y?(this.inputType=k.INPUT.ENUMERATE,this.legitimate=k.regTestMulti(this.getRegulations(),e.getCode()),a&&(this.actualResultDataType=e.getDataType())):(this.inputType=k.INPUT.CONSTANT,this.legitimate=k.regTestMulti(this.getRegulations(),e),a&&(this.actualResultDataType=k.identifyDataType(e))),this.parameter.isInputCompatible(this.inputType)||console.error("setting value: input type [".concat(this.inputType,"] not compatible here")),this.value=e}return this}}],[{key:"validate",value:function(e){var t=e.parameter,a="instantiating parameter";return t instanceof d||(console.error("".concat(a,": given object not an instance of Parameter")),!1)}}]),e}(),f=function(){function e(t){var a=t.template,n=t.name,i=void 0===n?"unnamed":n;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.template=a,this.name=i,this.values={},this.actualResultDataType=null,this.segmentsDisplay=[],this.segmentsCode=[],this.instancesQuoters=[],this.outWrap="",this.initValuesAndSegments())}return Object(c["a"])(e,[{key:"getTemplateId",value:function(){return this.template.getId()}},{key:"getTemplateName",value:function(){return this.template.getName()}},{key:"getTemplateResultDataType",value:function(){return this.template.getResultDataType()}},{key:"getName",value:function(){return this.name}},{key:"getResultDataType",value:function(){var e=this.getTemplateResultDataType();return k.isLegalDataType(e)?e:this.actualResultDataType}},{key:"getSegmentsDisplay",value:function(){return this.segmentsDisplay}},{key:"getSegmentsCode",value:function(){return this.segmentsCode}},{key:"getParamSize",value:function(){return this.template.getParamSize()}},{key:"getFirstParamIndex",value:function(){return this.template.getFirstParamIndex()}},{key:"getFirstTextIndex",value:function(){return this.template.getFirstTextIndex()}},{key:"getFirstTextNeighbors",value:function(e){var t="post"===e?1:0;return this.template.getFirstTextNeighbors()[t]}},{key:"getInstanceQuoters",value:function(){return this.instancesQuoters}},{key:"addInstanceQuoter",value:function(e){this.instancesQuoters.push(e)}},{key:"removeInstanceQuoter",value:function(e){this.instancesQuoters=this.instancesQuoters.filter((function(t){return t!==e}))}},{key:"bindInstanceQuotes",value:function(t,a){this.values[t].getValue()instanceof e&&this.values[t].getValue().removeInstanceQuoter(this),a instanceof e&&a.addInstanceQuoter(this)}},{key:"isLegitimate",value:function(){var e=this;return Object.keys(this.values).every((function(t){return e.values[t].isLegitimate()}))}},{key:"updateLegitimate",value:function(){var e=this;Object.keys(this.values).forEach((function(t){return e.values[t].updateLegitimate()}))}},{key:"updateQuotersLegitimate",value:function(){this.instancesQuoters.forEach((function(e){return e.updateLegitimate()}))}},{key:"getOutWrap",value:function(e){return!0===e&&(this.outWrap=this.outputWrapper()),this.outWrap}},{key:"setValue",value:function(e,t){return this===t?console.error("setting value: an instance's value can not be the instance itself"):this.values[e]?(this.bindInstanceQuotes(e,t),this.values[e].setValue(this.convertConstantToEnumerate(e,t)),e===this.getTemplateResultDataType()&&(this.actualResultDataType=this.values[e].getDataType()),this.updateQuotersLegitimate()):console.error("setting value: holder [".concat(e,"] not found on instance")),this.outWrap=this.outputWrapper(),this}},{key:"setFirstValue",value:function(e){return this.setValue(this.template.getFirstParam().getHolder(),e),this}},{key:"setName",value:function(e){return this.name=e,this}},{key:"convertConstantToEnumerate",value:function(e,t){var a=this;if("object"===Object(l["a"])(t)&&!Array.isArray(t)||Array.isArray(t)&&t.every((function(e){return"object"===Object(l["a"])(e)})))return t;if(this.values[e].isInputCompatible(k.INPUT.ENUMERATE)){var n=null;return Object.keys(this.values).forEach((function(i){i!==e&&a.values[i].getInputType()===k.INPUT.VARIABLE&&(a.values[e].isMultiple()?Array.isArray(t)&&(n=a.values[i].getValue().getEnums().filter((function(e){return t.includes(e.getCode())}))):n=a.values[i].getValue().getEnums().find((function(e){return e.getCode()===t})))})),null===n||void 0===n?t:n}return t}},{key:"outputWrapper",value:function(e){var t=this,a="display"===e?this.segmentsDisplay:this.segmentsCode;return a.map((function(a){return t.outputTextAtom(a,e,"wrapper")})).join("")}},{key:"outputText",value:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="display"===e?this.segmentsDisplay:this.segmentsCode;return n.map((function(n){return t.outputTextAtom(n,e,!0===a?"exp":"")})).join("")}},{key:"outputTextAtom",value:function(t,a,i){var s=this,r="",o="",l="",u="",c="",p="",d="",T="";switch(i){case"exp":u="[c]",T="[v]",p="[e]";break;case"wrapper":r=e.wrapperT[0],o=e.wrapperT[1],l=e.wrapperC[0],u=e.wrapperC[1],c=e.wrapperE[0],p=e.wrapperE[1],d=e.wrapperV[0],T=e.wrapperV[1];break;default:break}if(t instanceof m)return"".concat(r).concat(t.getContent()).concat(o);switch(t.getInputType()){case k.INPUT.CONSTANT:var y=t.getValue();return null===y?null:(t.getDataType()!==k.DATA.NUMBER&&t.getDataType()!==k.DATA.BOOLEAN&&(y=t.isMultiple()?y.map((function(e){return"'".concat(e,"'")})).join(","):"'".concat(y,"'")),"".concat(l).concat(y).concat(u));case k.INPUT.ENUMERATE:var h;return h=t.isMultiple()?"display"===a?t.getValue().map((function(e){return e.getLabel()})):t.getValue().map((function(e){return e.getCode()})):"display"===a?t.getValue().getLabel():t.getValue().getCode(),null===h?null:(t.getDataType()!==k.DATA.NUMBER&&t.getDataType()!==k.DATA.BOOLEAN&&(h=t.isMultiple()?h.map((function(e){return"'".concat(e,"'")})).join(","):"'".concat(h,"'")),"".concat(c).concat(h).concat(p));case k.INPUT.VARIABLE:var v="display"===a?t.getValue().getLabel():"".concat(t.getValue().getTableName(),".").concat(t.getValue().getName());return null===v?null:"".concat(d).concat(v).concat(T);case k.INPUT.INSTANCE:var f="display"===a?t.getValue().getSegmentsDisplay():t.getValue().getSegmentsCode();return["("].concat(Object(n["a"])(f.map((function(e){return s.outputTextAtom(e,a,i)}))),[")"]).join("");default:return null}}},{key:"initValuesAndSegments",value:function(){var e=this;this.values={};var t=this.template.getParams();Object.keys(t).forEach((function(a){var n=t[a];e.values[a]=new v({parameter:n})})),this.segmentsDisplay=this.template.getSegmentsDisplay().map((function(t){return e.mapSegment(t)})),this.segmentsCode=this.template.getSegmentsCode().map((function(t){return e.mapSegment(t)}))}},{key:"mapSegment",value:function(e){return e instanceof d?this.values[e.getHolder()]:e instanceof m?e:(console.error("instantiating template [".concat(this.template.getName(),"]: invalid segment")),null)}}],[{key:"validate",value:function(e){var t=e.template,a=e.name,n=void 0===a?"unnamed":a,i="instantiating template [".concat(n,"]");return t instanceof T||(console.error("".concat(i,": given object not an instance of Template")),!1)}},{key:"setWrappers",value:function(e){var t=e.wrapperText,a=void 0===t?"{t}":t,n=e.wrapperConstant,i=void 0===n?"{c}":n,s=e.wrapperEnumerate,r=void 0===s?"{e}":s,o=e.wrapperVariable,l=void 0===o?"{v}":o,u=e.wrapperInstance,c=void 0===u?"{i}":u;a.includes("{t}")||console.error("invalid wrapper for text"),i.includes("{c}")||console.error("invalid wrapper for constant"),r.includes("{e}")||console.error("invalid wrapper for enumerate"),l.includes("{v}")||console.error("invalid wrapper for variable"),c.includes("{i}")||console.error("invalid wrapper for instance"),this.wrapperT=a.split("{t}"),this.wrapperC=i.split("{c}"),this.wrapperE=r.split("{e}"),this.wrapperV=l.split("{v}"),this.wrapperI=c.split("{i}")}}]),e}();Object(p["a"])(f,"wrapperT",["",""]),Object(p["a"])(f,"wrapperC",["",""]),Object(p["a"])(f,"wrapperE",["",""]),Object(p["a"])(f,"wrapperV",["",""]),Object(p["a"])(f,"wrapperI",["",""]);var A=new Set;for(var b in i)A.add(i[b]);function g(e){return A.has(e)}function $(e){return e===i.UNCERTAIN}var D=new Set;for(var N in r)D.add(r[N]);function w(e){return D.has(e)}function E(e){return e instanceof f?r.INSTANCE:e instanceof h?r.VARIABLE:e instanceof y?r.ENUMERATE:r.CONSTANT}var I=new Set;for(var x in s)I.add(s[x]);function S(e){return I.has(e)}var O=new Map;for(var R in o)i[R]?O.set(i[R],new RegExp(o[R])):O.set(R.toLowerCase(),new RegExp(o[R]));function M(e){return O.has(e)?O.get(e):(console.error("no such regular type: ".concat(e)),null)}function C(e,t){if(e===i.UNCERTAIN)return!0;var a=M(e);return!!a&&a.test(t)}function _(e,t){return e.every((function(e){return C(e,t)}))}function U(e){return C(i.NUMBER,e)?i.NUMBER:C(i.BOOLEAN,e)?i.BOOLEAN:C(i.DATE,e)?i.DATE:C(i.MONTH,e)?i.MONTH:C(i.YEAR,e)?i.YEAR:C(i.TIME,e)?i.TIME:C(i.GEOGRAPHY,e)?i.GEOGRAPHY:C(i.STRING,e)?i.STRING:i.UNCERTAIN}var k={DATA:i,DISTRIBUTE:s,INPUT:r,REGS:o,isLegalDataType:g,isLegalInputType:w,isLegalDistributeType:S,isUncertainDataType:$,getRegExp:M,regTest:C,regTestMulti:_,identifyDataType:U,identifyInputType:E},B={MYSQL:"mysql",MYSQL_CN:"mysql-cn"},L=[new T({id:100,name:"+",context:B.MYSQL,templateDisplay:"$1 + $2",templateCode:"$1+$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:101,name:"-",context:B.MYSQL,templateDisplay:"$1 - $2",templateCode:"$1-$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:102,name:"*",context:B.MYSQL,templateDisplay:"$1 * $2",templateCode:"$1*$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:103,name:"/",context:B.MYSQL,templateDisplay:"$1 / $2",templateCode:"$1/$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:104,name:"div",context:B.MYSQL,templateDisplay:"$1 div $2",templateCode:"$1 div $2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:105,name:"%",context:B.MYSQL,templateDisplay:"$1 % $2",templateCode:"$1 mod $2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1e3,name:"=",context:B.MYSQL,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1001,name:"≠",context:B.MYSQL,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1002,name:">",context:B.MYSQL,templateDisplay:"$1 > $2",templateCode:"$1>$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1003,name:"≥",context:B.MYSQL,templateDisplay:"$1 ≥ $2",templateCode:"$1≥$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1004,name:"<",context:B.MYSQL,templateDisplay:"$1 < $2",templateCode:"$1<$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1005,name:"≤",context:B.MYSQL,templateDisplay:"$1 ≤ $2",templateCode:"$1≤$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1006,name:"(a,b)",context:B.MYSQL,templateDisplay:"$1 (a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2 and $1!=$3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1007,name:"[a,b]",context:B.MYSQL,templateDisplay:"$1 [a,b] $2, $3",templateCode:"$1 between $2 and $3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1008,name:"(a,b]",context:B.MYSQL,templateDisplay:"$1 (a,b] $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1009,name:"[a,b)",context:B.MYSQL,templateDisplay:"$1 [a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1010,name:"in",context:B.MYSQL,templateDisplay:"$1 in $2",templateCode:"$1 in ($2)",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER,multiple:!0,inputTypes:[k.INPUT.CONSTANT,k.INPUT.ENUMERATE]})}}),new T({id:1011,name:"not in",context:B.MYSQL,templateDisplay:"$1 not in ($2)",templateCode:"$1 not in ($2)",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER,multiple:!0,inputTypes:[k.INPUT.CONSTANT,k.INPUT.ENUMERATE]})}})],j={ops:L},P=[new T({id:200,name:"concat",context:B.MYSQL,templateDisplay:"$1 concat $2",templateCode:"concat($1,$2)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}}),new T({id:201,name:"concat3",context:B.MYSQL,templateDisplay:"$1 concat $2 concat $3",templateCode:"concat($1,$2,$3)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING}),$3:new d({dataType:k.DATA.STRING})}}),new T({id:202,name:"substr",context:B.MYSQL,templateDisplay:"$1 substring from $2",templateCode:"substring($1,$2)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]})}}),new T({id:203,name:"subfix",context:B.MYSQL,templateDisplay:"$1 substring from $2 by length $3",templateCode:"substring($1,$2,$3)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]}),$3:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]})}}),new T({id:2e3,name:"=",alias:"=.str",context:B.MYSQL,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}}),new T({id:2001,name:"≠",alias:"≠.str",context:B.MYSQL,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}}),new T({id:2002,name:"in",alias:"in.str",context:B.MYSQL,templateDisplay:"$1 in ($2)",templateCode:"$1 in ($2),",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING,multiple:!0,inputTypes:[k.INPUT.CONSTANT,k.INPUT.ENUMERATE]})}}),new T({id:2003,name:"not in",alias:"notin.str",context:B.MYSQL,templateDisplay:"$1 not in ($2)",templateCode:"$1 not in ($2),",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING,multiple:!0,inputTypes:[k.INPUT.CONSTANT,k.INPUT.ENUMERATE]})}})],Y={ops:P},Q=[new T({id:300,name:"and",context:B.MYSQL,templateDisplay:"$1 and $2",templateCode:"$1 and $2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN}),$2:new d({dataType:k.DATA.BOOLEAN})}}),new T({id:301,name:"or",context:B.MYSQL,templateDisplay:"$1 or $2",templateCode:"$1 or $2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN}),$2:new d({dataType:k.DATA.BOOLEAN})}}),new T({id:302,name:"not",context:B.MYSQL,templateDisplay:"not $1",templateCode:"not $1",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN})}})],G={ops:Q},F=[],V={ops:F},H=[],z={ops:H},W=[],q={ops:W},J=[],K={ops:J},Z=[],X={ops:Z},ee=[new T({id:8e3,name:"sum",context:B.MYSQL,templateDisplay:"sum($1)",templateCode:"sum($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER})}}),new T({id:8001,name:"avg",context:B.MYSQL,templateDisplay:"avg($1)",templateCode:"avg($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER})}}),new T({id:8002,name:"min",context:B.MYSQL,templateDisplay:"min($1)",templateCode:"min($1)",resultDataType:"$1",params:{$1:new d({dataType:k.DATA.UNCERTAIN})}}),new T({id:8003,name:"max",context:B.MYSQL,templateDisplay:"max($1)",templateCode:"max($1)",resultDataType:"$1",params:{$1:new d({dataType:k.DATA.UNCERTAIN})}}),new T({id:8004,name:"count",context:B.MYSQL,templateDisplay:"count($1)",templateCode:"count($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.UNCERTAIN})}})],te={ops:ee},ae=[new T({id:9e3,name:"string",context:B.MYSQL,templateDisplay:"string($1)",templateCode:"cast($1 as char)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.NUMBER})}})],ne={ops:ae},ie=[new T({id:100,name:"+",context:B.MYSQL_CN,templateDisplay:"$1 + $2",templateCode:"$1+$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:101,name:"-",context:B.MYSQL_CN,templateDisplay:"$1 - $2",templateCode:"$1-$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:102,name:"*",context:B.MYSQL_CN,templateDisplay:"$1 * $2",templateCode:"$1*$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:103,name:"/",context:B.MYSQL_CN,templateDisplay:"$1 / $2",templateCode:"$1/$2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:104,name:"整除",context:B.MYSQL_CN,templateDisplay:"$1 整除 $2",templateCode:"$1 div $2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:105,name:"取余",context:B.MYSQL_CN,templateDisplay:"$1 取余 $2",templateCode:"$1 mod $2",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1e3,name:"=",context:B.MYSQL_CN,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1001,name:"≠",context:B.MYSQL_CN,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1002,name:">",context:B.MYSQL_CN,templateDisplay:"$1 > $2",templateCode:"$1>$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1003,name:"≥",context:B.MYSQL_CN,templateDisplay:"$1 ≥ $2",templateCode:"$1≥$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1004,name:"<",context:B.MYSQL_CN,templateDisplay:"$1 < $2",templateCode:"$1<$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1005,name:"≤",context:B.MYSQL_CN,templateDisplay:"$1 ≤ $2",templateCode:"$1≤$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER})}}),new T({id:1006,name:"(a,b)",context:B.MYSQL_CN,templateDisplay:"$1 (a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2 and $1!=$3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1007,name:"[a,b]",context:B.MYSQL_CN,templateDisplay:"$1 [a,b] $2, $3",templateCode:"$1 between $2 and $3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1008,name:"(a,b]",context:B.MYSQL_CN,templateDisplay:"$1 (a,b] $2, $3",templateCode:"$1 between $2 and $3 and $1!=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}}),new T({id:1009,name:"[a,b)",context:B.MYSQL_CN,templateDisplay:"$1 [a,b) $2, $3",templateCode:"$1 between $2 and $3 and $1!=$3",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.NUMBER}),$2:new d({dataType:k.DATA.NUMBER}),$3:new d({dataType:k.DATA.NUMBER})}})],se={ops:ie},re=[new T({id:200,name:"拼接",context:B.MYSQL_CN,templateDisplay:"$1 拼接 $2",templateCode:"concat($1,$2)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}}),new T({id:201,name:"二次拼接",context:B.MYSQL_CN,templateDisplay:"$1 拼接 $2 拼接 $3",templateCode:"concat($1,$2,$3)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING}),$3:new d({dataType:k.DATA.STRING})}}),new T({id:202,name:"截取前",context:B.MYSQL_CN,templateDisplay:"$1 截取前 $2 位",templateCode:"substring($1,$2)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]})}}),new T({id:203,name:"截取",context:B.MYSQL_CN,templateDisplay:"$1 截取 $2 位 长度为 $3",templateCode:"substring($1,$2,$3)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]}),$3:new d({dataType:k.DATA.NUMBER,inputTypes:[k.INPUT.CONSTANT]})}}),new T({id:2e3,name:"=",alias:"=.str",context:B.MYSQL_CN,templateDisplay:"$1 = $2",templateCode:"$1=$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}}),new T({id:2001,name:"≠",alias:"≠.str",context:B.MYSQL_CN,templateDisplay:"$1 ≠ $2",templateCode:"$1≠$2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.STRING}),$2:new d({dataType:k.DATA.STRING})}})],oe={ops:re},le=[new T({id:300,name:"与",context:B.MYSQL,templateDisplay:"$1 与 $2",templateCode:"$1 and $2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN}),$2:new d({dataType:k.DATA.BOOLEAN})}}),new T({id:301,name:"或",context:B.MYSQL_CN,templateDisplay:"$1 或 $2",templateCode:"$1 or $2",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN}),$2:new d({dataType:k.DATA.BOOLEAN})}}),new T({id:302,name:"非",context:B.MYSQL_CN,templateDisplay:"非 $1",templateCode:"not $1",resultDataType:k.DATA.BOOLEAN,params:{$1:new d({dataType:k.DATA.BOOLEAN})}})],ue={ops:le},ce=[],pe={ops:ce},de=[],me={ops:de},Te=[],ye={ops:Te},he=[],ve={ops:he},fe=[],Ae={ops:fe},be=[new T({id:8e3,name:"求和",context:B.MYSQL_CN,templateDisplay:"求和($1)",templateCode:"sum($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER})}}),new T({id:8001,name:"平均值",context:B.MYSQL_CN,templateDisplay:"平均值($1)",templateCode:"avg($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.NUMBER})}}),new T({id:8002,name:"最小值",context:B.MYSQL_CN,templateDisplay:"最小值($1)",templateCode:"min($1)",resultDataType:"$1",params:{$1:new d({dataType:k.DATA.UNCERTAIN})}}),new T({id:8003,name:"最大值",context:B.MYSQL_CN,templateDisplay:"最大值($1)",templateCode:"max($1)",resultDataType:"$1",params:{$1:new d({dataType:k.DATA.UNCERTAIN})}}),new T({id:8004,name:"计数",context:B.MYSQL_CN,templateDisplay:"计数($1)",templateCode:"count($1)",resultDataType:k.DATA.NUMBER,params:{$1:new d({dataType:k.DATA.UNCERTAIN})}})],ge={ops:be},$e=[new T({id:9e3,name:"转为字符串",context:B.MYSQL_CN,templateDisplay:"转为字符串($1)",templateCode:"cast($1 as char)",resultDataType:k.DATA.STRING,params:{$1:new d({dataType:k.DATA.NUMBER})}})],De={ops:$e},Ne={};Ne[B.MYSQL]=[].concat(Object(n["a"])(j.ops),Object(n["a"])(Y.ops),Object(n["a"])(G.ops),Object(n["a"])(V.ops),Object(n["a"])(z.ops),Object(n["a"])(q.ops),Object(n["a"])(K.ops),Object(n["a"])(X.ops),Object(n["a"])(ne.ops),Object(n["a"])(te.ops)),Ne[B.MYSQL_CN]=[].concat(Object(n["a"])(se.ops),Object(n["a"])(oe.ops),Object(n["a"])(ue.ops),Object(n["a"])(pe.ops),Object(n["a"])(me.ops),Object(n["a"])(ye.ops),Object(n["a"])(ve.ops),Object(n["a"])(Ae.ops),Object(n["a"])(De.ops),Object(n["a"])(ge.ops));var we="",Ee=[],Ie=[],xe={},Se={},Oe={},Re={},Me=[];function Ce(){return Ne}function _e(){return we}function Ue(e){Ne[e]?(Ee=[],Ie=[],xe={},Se={},Oe={},Re={},Me=[],we=e,Ee=Ne[e],Ee.forEach((function(e){return Le(e)}))):console.error("operator context: [".concat(e,"] does not exist"))}function ke(e){Ne[e.getContext()]||(Ne[e.getContext()]=[]),Ne[e.getContext()].push(e),e.getContext()===we&&Le(e)}function Be(e){e.getContext()===we&&null!==e.getAlias()&&void 0!==e.getAlias()&&""!==e.getAlias()&&(Se[e.getAlias()]?console.error("duplicate template alias: ".concat(e.getAlias())):Se[e.getAlias()]=e)}function Le(e){Ie.push(e),xe[e.getId()]?console.error("duplicate template id: ".concat(e.getId())):xe[e.getId()]=e,Be(e);var t=e.getResultDataType();Oe[t]||(Oe[t]=[]),Oe[t].push(e);var a=e.getFirstParam();Re[a.getDataType()]||(Re[a.getDataType()]=[]),Re[a.getDataType()].push(e),e.isCustomized()&&Me.push(e)}function je(e){return Se[e]?Se[e]:(console.error("template of alias: ".concat(e," does not exist")),null)}function Pe(e){return xe[e]?xe[e]:(console.error("template of id: ".concat(e," does not exist")),null)}function Ye(){return Ie}function Qe(e){return k.isLegalDataType(e)?Oe[e]:(console.error("data type: ".concat(e," does not exist")),null)}function Ge(e){return k.isLegalDataType(e)?(Re[e]||[]).concat(Re[k.DATA.UNCERTAIN]||[]):(console.error("data type: ".concat(e," does not exist")),null)}function Fe(){return Me}Ue(B.MYSQL);var Ve={getContexts:Ce,getActiveContext:_e,activateContext:Ue,opById:Pe,opsList:Ye,opsByResult:Qe,opsToRespond:Ge,opsCustomized:Fe},He=(a("a9e3"),"resops");h.prototype[He]=function(){return Ge(this.getDataType())},y.prototype[He]=function(){return Ge(this.getDataType())},f.prototype[He]=function(){return Ge(this.getResultDataType())},String.prototype[He]||(String.prototype[He]=function(){return Ge(k.identifyDataType(this))}),Number.prototype[He]||(Number.prototype[He]=function(){return Ge(k.DATA.NUMBER)}),Boolean.prototype[He]||(Boolean.prototype[He]=function(){return Ge(type.DATA.BOOLEAN)});var ze="en",We={en:{constant:"Const",enumerate:"Enum",variable:"Field",instance:"Inst"},cn:{constant:"常量",enumerate:"枚举",variable:"字段",instance:"式"}};function qe(e){ze=e}function Je(){return We[ze]}var Ke={switchTo:qe,getAbbr:Je},Ze="abbr";String.prototype[Ze]||(String.prototype[Ze]=function(){return Ke.getAbbr()[this]||this});var Xe=function(){function e(t){var a=t.id,n=t.name,i=t.label,s=t.hint,r=void 0===s?"":s;Object(u["a"])(this,e),e.validate.apply(e,arguments)&&(this.id=a,this.name=n,this.label=i,this.hint=r,this.fields=[],this.mapFieldsName={})}return Object(c["a"])(e,[{key:"addFields",value:function(e){var t=this,a="adding fields for [".concat(this.name,"]");return e.forEach((function(e){e instanceof h?1===t.mapFieldsName[e.getName()]?console.error("".concat(a,": field ").concat(e.getName()," already exists for table ").concat(t.name)):(t.mapFieldsName[e.getName()]=1,t.fields.push(e.setTableId(t.id).setTableName(t.name))):console.error("".concat(a,": given object not an instance of Field"))})),this}},{key:"getName",value:function(){return this.name}},{key:"getLabel",value:function(){return this.label}},{key:"getHint",value:function(){return this.hint}},{key:"getFields",value:function(){return this.fields}}],[{key:"validate",value:function(e){var t=e.id,a=e.name,n=(e.label,e.hint,"defining table [".concat(a,"]"));return!(!t&&0!==t||!a)||(console.error("".concat(n,": missing information")),!1)}}]),e}(),et=0,tt=et,at={},nt=[],it=[];function st(){et++}function rt(e){nt.push(e),et++}function ot(e){it.push(e),et++}function lt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return et!==tt&&(ut(),tt=et),""===e?null:""===t?at["".concat(e)]||null:""===a?at["".concat(e,".").concat(t)]||null:at["".concat(e,".").concat(t,".").concat(a)]||null}function ut(){at={},it.forEach((function(e){var t="".concat(e.getName());at[t]?console.error("duplicate table: ".concat(t)):(at[t]=e,e.getFields().forEach((function(t){var a="".concat(e.getName(),".").concat(t.getName());at[a]?console.error("duplicate field: ".concat(a)):(at[a]=t,t.getEnums().forEach((function(a){var n="".concat(e.getName(),".").concat(t.getName(),".").concat(a.getCode());at[n]?console.error("duplicate enum: ".concat(n)):at[n]=a})))})))}))}function ct(){et=0,tt=et,at={},nt=[],it=[],ut()}function pt(){nt=[new h({id:1e3,name:"USER_ID",label:"UserId",dataType:k.DATA.STRING}),new h({id:1001,name:"USER_NAME",label:"UserName",dataType:k.DATA.STRING}),new h({id:1002,name:"AGE",label:"Age",dataType:k.DATA.NUMBER,distributeType:k.DISTRIBUTE.METRICS,unit:"years"}),new h({id:1003,name:"GENDER",label:"Gender",dataType:k.DATA.NUMBER,distributeType:k.DISTRIBUTE.CATEGORY}).addEnums([new y({id:100001,code:0,label:"Male"}),new y({id:100002,code:1,label:"Female"})]),new h({id:1004,name:"NATIONALITY",label:"nationality",dataType:k.DATA.STRING,distributeType:k.DISTRIBUTE.CATEGORY}).addEnums([new y({id:100003,code:"cn",label:"China"}),new y({id:100004,code:"us",label:"USA"}),new y({id:100005,code:"jp",label:"Japan"})])],it=[new Xe({id:100,name:"PERSON_INFO",label:"Personal information"}).addFields(nt)],ut()}function dt(){return nt}function mt(){return it}ct();var Tt={fieldsList:dt,tablesList:mt,clear:ct,useExample:pt},yt=a("8b83"),ht=a("c65a"),vt=a("9aa6"),ft=a("c03e"),At=1e4,bt=At,gt=function(e){function t(e){var a,n=e.name,i=e.context,s=e.templateDisplay,r=e.templateCode,o=e.resultDataType,l=e.params;return Object(u["a"])(this,t),a=Object(yt["a"])(this,Object(ht["a"])(t).call(this,{id:bt,name:n,alias:"",context:i,templateDisplay:s,templateCode:r,resultDataType:o,params:l,customized:!0})),bt++,ke(Object(vt["a"])(a)),a}return Object(ft["a"])(t,e),Object(c["a"])(t,[{key:"as",value:function(e){return this.setAlias(e),Be(this),this}}]),t}(T),$t=function(e){function t(e){var a=e.dataType,n=e.inputTypes,i=e.regulations;return Object(u["a"])(this,t),Object(yt["a"])(this,Object(ht["a"])(t).call(this,{dataType:a,inputTypes:n,regulations:i}))}return Object(ft["a"])(t,e),t}(d),Dt=100,Nt=Dt,wt=function(e){function t(e){var a,n=e.name,i=e.label,s=e.hint;return Object(u["a"])(this,t),a=Object(yt["a"])(this,Object(ht["a"])(t).call(this,{id:Nt,name:n,label:i,hint:s})),Nt++,ot(Object(vt["a"])(a)),a}return Object(ft["a"])(t,e),t}(Xe),Et=function(e){function t(e){var a,n=e.name,i=e.label,s=e.hint,r=e.dataType,o=e.distributeType,l=e.unit;return Object(u["a"])(this,t),a=Object(yt["a"])(this,Object(ht["a"])(t).call(this,{id:Nt,name:n,label:i,hint:s,dataType:r,distributeType:o,unit:l})),Nt++,rt(Object(vt["a"])(a)),a}return Object(ft["a"])(t,e),t}(h),It=function(e){function t(e){var a,n=e.code,i=e.label;return Object(u["a"])(this,t),a=Object(yt["a"])(this,Object(ht["a"])(t).call(this,{id:Nt,code:n,label:i})),Nt++,st(),a}return Object(ft["a"])(t,e),t}(y);a.d(t,"f",(function(){return je})),a.d(t,"g",(function(){return Ve})),a.d(t,"k",(function(){return k})),a.d(t,"a",(function(){return lt})),a.d(t,"e",(function(){return Tt})),a.d(t,"d",(function(){return f})),a.d(t,"j",(function(){return gt})),a.d(t,"h",(function(){return $t})),a.d(t,"i",(function(){return wt})),a.d(t,"c",(function(){return Et})),a.d(t,"b",(function(){return It})),a.d(t,"l",(function(){return Ke}))},"1c95":function(e,t,a){},"3a65":function(e,t,a){},4805:function(e,t,a){"use strict";var n=a("8ce0"),i=a.n(n);i.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{attrs:{id:"nav"}},[a("router-link",{attrs:{to:"/demo-en"}},[e._v("English")]),e._v(" | "),a("router-link",{attrs:{to:"/demo-cn"}},[e._v("中文")]),e._v(" | "),a("router-link",{attrs:{to:"/demo-keynote"}},[e._v("Keynote")])],1),a("router-view")],1)},s=[],r=(a("034f"),a("2877")),o={},l=Object(r["a"])(o,i,s,!1,null,null,null),u=l.exports,c=(a("d3b7"),a("8c4f")),p=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("img",{attrs:{alt:"Vue logo",src:a("cf05")}}),n("HelloWorld",{attrs:{msg:"Welcome to Your Vue.js App"}})],1)},d=[],m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._m(0),a("h3",[e._v("Installed CLI Plugins")]),e._m(1),a("h3",[e._v("Essential Links")]),e._m(2),a("h3",[e._v("Ecosystem")]),e._m(3)])},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),a("br"),e._v(" check out the "),a("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),a("li",[a("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),a("li",[a("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),a("li",[a("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),a("li",[a("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ul",[a("li",[a("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),a("li",[a("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),a("li",[a("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),a("li",[a("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],y={name:"HelloWorld",props:{msg:String}},h=y,v=(a("4805"),Object(r["a"])(h,m,T,!1,null,"b9167eee",null)),f=v.exports,A={name:"home",components:{HelloWorld:f}},b=A,g=Object(r["a"])(b,p,d,!1,null,null,null),$=g.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("* 将鼠标悬浮在每一行的左方控件上, 会出现输入类型的选项, 点击上下箭头切换为「常量」「字段」「枚举」「式」")]),a("div",[e._v("* 一个「式」可以作为参数被处于它下方的其他「式」引用")]),a("div",[e._v("* 请暂且使用Chrome浏览器")]),e._l(e.allInsts,(function(t,n){return a("div",[a("expression-atom",{attrs:{name:"式"+(n+1),variables:e.fields,instances:e.providedInsts[n]},on:{alter:function(t){return e.alterInst(t,n)}}}),a("expression-note",{attrs:{instance:t,mode:"code",prefix:"MYSQL: "}}),a("expression-note",{attrs:{instance:t,mode:"display",prefix:"说明: "}})],1)})),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px","margin-bottom":"40px"},on:{click:e.addInst}},[e._v("+ 增加一行新「式」")]),a("div",{staticStyle:{height:"4px","border-bottom":"1px solid #ddd"}}),a("div",{staticStyle:{height:"4px","margin-top":"30px"}}),a("div",[e._v("* 操作符可动态添加, 点击添加后再次查看数字类型所联想的操作符")]),e._m(0),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px","margin-bottom":"40px"},on:{click:e.addOper}},[e._v("+ 增加操作符「立方」")])],2)},N=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("div",{staticStyle:{"text-indent":"40%"}},[e._v("new Template({")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("name: '立方',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("context: 'mysql-cn',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("templateDisplay: '立方($1)',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("templateCode: '$1*$1*$1',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("resultDataType: 'number',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("params: {")]),a("div",{staticStyle:{"text-indent":"48%"}},[e._v("$1: new Parameter({")]),a("div",{staticStyle:{"text-indent":"52%"}},[e._v("dataType: 'number'")]),a("div",{staticStyle:{"text-indent":"48%"}},[e._v("})")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("}")]),a("div",{staticStyle:{"text-indent":"40%"}},[e._v("}).as('立方');")])])}],w=(a("4160"),a("fb6a"),a("159b"),a("284c")),E=a("8c5b"),I=a("8c97"),x=a("13e6"),S={name:"demo-cn",components:{ExpressionAtom:E["a"],ExpressionNote:I["a"]},data:function(){return{fields:[],allInsts:[null,null],providedInsts:[],added:!1}},computed:{},mounted:function(){var e=this;x["l"].switchTo("cn"),x["g"].activateContext("mysql-cn");var t=[new x["i"]({name:"USER_INFO_DIM",label:"用户信息维表"}).addFields([new x["c"]({name:"USER_ID",label:"用户ID",dataType:"string"}),new x["c"]({name:"USER_NAME",label:"用户名称",dataType:"string"}),new x["c"]({name:"AGE",label:"年龄",dataType:"number",distributeType:"metrics",unit:"岁"}),new x["c"]({name:"GENDER",label:"性别",dataType:"number",distributeType:"category"}).addEnums([new x["b"]({code:0,label:"男"}),new x["b"]({code:1,label:"女"})])]),new x["i"]({name:"COMMODITY_INFO_DIM",label:"商品信息维表"}).addFields([new x["c"]({name:"COMMODITY_ID",label:"商品ID",dataType:"string"}),new x["c"]({name:"COMMODITY_NAME",label:"商品名称",dataType:"string"}),new x["c"]({name:"UNIT_PRICE",label:"单价",dataType:"number",distributeType:"metrics",unit:"元"})]),new x["i"]({name:"COMMODITY_PURCHASE_LOG",label:"商品购买记录表"}).addFields([new x["c"]({name:"COMMODITY_ID",label:"商品ID(禁用)",dataType:"string"}),new x["c"]({name:"USER_ID",label:"用户ID(禁用)",dataType:"string"}),new x["c"]({name:"QUANTITY",label:"交易数量",dataType:"number",distributeType:"metrics",unit:"个"}),new x["c"]({name:"DISCOUNT",label:"折扣",dataType:"string",distributeType:"category"}).addEnums([new x["b"]({code:"none",label:"无折扣"}),new x["b"]({code:"0.8-all",label:"总价8折"}),new x["b"]({code:"0.5-sec",label:"第2个半价"}),new x["b"]({code:"free",label:"白给"})])])];this.fields=[],t.forEach((function(t){var a;(a=e.fields).push.apply(a,Object(w["a"])(t.getFields()))}))},methods:{alterInst:function(e,t){this.allInsts[t]=e,this.updateProvided()},addInst:function(){this.allInsts.push(null),this.updateProvided()},addOper:function(){this.added||(new x["j"]({name:"立方",context:"mysql-cn",templateDisplay:"立方($1)",templateCode:"$1*$1*$1",resultDataType:"number",params:{$1:new x["h"]({dataType:"number"})}}).as("立方"),this.added=!0)},updateProvided:function(){var e=this;this.$nextTick((function(){var t=[];e.allInsts.length;e.allInsts.forEach((function(a,n){t.push(e.allInsts.slice(0,n))})),e.providedInsts=t}))}},watch:{}},O=S,R=Object(r["a"])(O,D,N,!1,null,"41c0120c",null),M=R.exports,C=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e._v("* Place mouse over the select or input on the left to see the options of input types. Input type can switch among constant, field, enumerate and instance.")]),a("div",[e._v("* An instance can be referred as a parameter by another instance that placed beneath itself.")]),a("div",[e._v("* Please use Chrome for now.")]),e._l(e.allInsts,(function(t,n){return a("div",[a("expression-atom",{attrs:{name:"Inst-"+(n+1),variables:e.fields,instances:e.providedInsts[n]},on:{alter:function(t){return e.alterInst(t,n)}}}),a("expression-note",{attrs:{instance:t,mode:"code",prefix:"MYSQL: "}}),a("expression-note",{attrs:{instance:t,mode:"display",prefix:"Expl: "}})],1)})),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px","margin-bottom":"40px"},on:{click:e.addInst}},[e._v("+ Add a new instance")]),a("div",{staticStyle:{height:"4px","border-bottom":"1px solid #ddd"}}),a("div",{staticStyle:{height:"4px","margin-top":"30px"}}),a("div",[e._v("* Operators can be customized, click to add 「cubic」and return above to see what new will respond the number type of inputs.")]),e._m(0),a("div",{staticStyle:{cursor:"pointer","font-size":"1.5em","margin-top":"40px","margin-bottom":"40px"},on:{click:e.addOper}},[e._v("+ Add operator「cubic」")])],2)},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"text-align":"left","margin-top":"20px"}},[a("div",{staticStyle:{"text-indent":"40%"}},[e._v("new Template({")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("name: 'cubic',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("context: 'mysql',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("templateDisplay: 'cubic($1)',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("templateCode: '$1*$1*$1',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("resultDataType: 'number',")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("params: {")]),a("div",{staticStyle:{"text-indent":"48%"}},[e._v("$1: new Parameter({")]),a("div",{staticStyle:{"text-indent":"52%"}},[e._v("dataType: 'number'")]),a("div",{staticStyle:{"text-indent":"48%"}},[e._v("})")]),a("div",{staticStyle:{"text-indent":"44%"}},[e._v("}")]),a("div",{staticStyle:{"text-indent":"40%"}},[e._v("}).as('cubic');")])])}],U={name:"demo-en",components:{ExpressionAtom:E["a"],ExpressionNote:I["a"]},data:function(){return{fields:[],allInsts:[null,null],providedInsts:[],added:!1}},computed:{},mounted:function(){var e=this;x["l"].switchTo("en"),x["g"].activateContext("mysql");var t=[new x["i"]({name:"USER_INFO",label:"users' basic info"}).addFields([new x["c"]({name:"USER_ID",label:"user id",dataType:"string"}),new x["c"]({name:"USER_NAME",label:"user name",dataType:"string"}),new x["c"]({name:"AGE",label:"age",dataType:"number",distributeType:"metrics",unit:"year"}),new x["c"]({name:"GENDER",label:"gender",dataType:"number",distributeType:"category"}).addEnums([new x["b"]({code:0,label:"male"}),new x["b"]({code:1,label:"female"})])]),new x["i"]({name:"COMMODITY_INFO",label:"commodities' info"}).addFields([new x["c"]({name:"COMMODITY_ID",label:"commodity id",dataType:"string"}),new x["c"]({name:"COMMODITY_NAME",label:"commodity name",dataType:"string"}),new x["c"]({name:"UNIT_PRICE",label:"unit price",dataType:"number",distributeType:"metrics",unit:"USD"})]),new x["i"]({name:"COMMODITY_PURCHASE_LOG",label:"commodities' transaction"}).addFields([new x["c"]({name:"COMMODITY_ID",label:"commodity id (disabled)",dataType:"string"}),new x["c"]({name:"USER_ID",label:"user id (disabled)",dataType:"string"}),new x["c"]({name:"QUANTITY",label:"quantity",dataType:"number",distributeType:"metrics",unit:"unit"}),new x["c"]({name:"DISCOUNT",label:"discount",dataType:"string",distributeType:"category"}).addEnums([new x["b"]({code:"none",label:"no discount"}),new x["b"]({code:"0.8-all",label:"20% off for total"}),new x["b"]({code:"0.5-sec",label:"50% off for the second"}),new x["b"]({code:"free",label:"free"})])])];this.fields=[],t.forEach((function(t){var a;(a=e.fields).push.apply(a,Object(w["a"])(t.getFields()))}))},methods:{alterInst:function(e,t){this.allInsts[t]=e,this.updateProvided()},addInst:function(){this.allInsts.push(null),this.updateProvided()},addOper:function(){this.added||(new x["j"]({name:"cubic",context:"mysql",templateDisplay:"cubic($1)",templateCode:"$1*$1*$1",resultDataType:"number",params:{$1:new x["h"]({dataType:"number"})}}).as("cubic"),this.added=!0)},updateProvided:function(){var e=this;this.$nextTick((function(){var t=[];e.allInsts.length;e.allInsts.forEach((function(a,n){t.push(e.allInsts.slice(0,n))})),e.providedInsts=t}))}},watch:{}},k=U,B=Object(r["a"])(k,C,_,!1,null,"5fe5dda5",null),L=B.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",e._l(e.allInsts,(function(t,n){return a("div",[a("expression-atom",{ref:"atom"+(n+1),refInFor:!0,attrs:{name:"式"+(n+1),variables:e.fields,instances:e.providedInsts[n]},on:{alter:function(t){return e.alterInst(t,n)}}}),a("expression-note",{attrs:{instance:t,mode:"code",prefix:"MYSQL: "}})],1)})),0)},P=[],Y=(a("b0c0"),a("96cf"),{name:"demo-keynote",components:{ExpressionAtom:E["a"],ExpressionNote:I["a"]},data:function(){return{fields:[],allInsts:[null,null,null,null],providedInsts:[],added:!1}},mounted:function(){var e,t,a=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:x["l"].switchTo("cn"),x["g"].activateContext("mysql"),x["e"].clear(),e=[new x["i"]({name:"A",label:"观影事实表"}).addFields([new x["c"]({name:"END_TIME",label:"结束时间",dataType:"number"}),new x["c"]({name:"START_TIME",label:"开始时间",dataType:"number"})]),new x["i"]({name:"B",label:"用户维表"}).addFields([new x["c"]({name:"SIGNUP_TIME",label:"注册时间",dataType:"number"})])],this.fields=[],e.forEach((function(e){var t;(t=a.fields).push.apply(t,Object(w["a"])(e.getFields()))})),t=new x["d"]({template:Object(x["f"])("-")}),t.setValue("$1",Object(x["a"])("A","END_TIME")).setValue("$2",Object(x["a"])("A","START_TIME")),t.name="式1",this.$refs.atom1[0].syncInstance(t),this.$nextTick((function(){a.$nextTick((function(){a.$nextTick((function(){var e=new x["d"]({template:Object(x["f"])("sum")});e.setValue("$1",a.$refs.atom1[0].instance),e.name="式2";var t=new x["d"]({template:Object(x["f"])("-")});t.setValue("$1",1555e6).setValue("$2",Object(x["a"])("B","SIGNUP_TIME")),t.name="式3",a.$refs.atom2[0].syncInstance(e),a.$refs.atom3[0].syncInstance(t),a.$nextTick((function(){a.$nextTick((function(){a.$nextTick((function(){var e=new x["d"]({template:Object(x["f"])("/")});e.setValue("$1",a.$refs.atom2[0].instance).setValue("$2",a.$refs.atom3[0].instance),e.name="式",a.$refs.atom4[0].syncInstance(e)}))}))}))}))}))}));case 11:case"end":return n.stop()}}),null,this)},methods:{alterInst:function(e,t){this.allInsts[t]=e,this.updateProvided()},addInst:function(){this.allInsts.push(null),this.updateProvided()},updateProvided:function(){var e=this;this.$nextTick((function(){var t=[];e.allInsts.length;e.allInsts.forEach((function(a,n){t.push(e.allInsts.slice(0,n))})),e.providedInsts=t}))}},watch:{}}),Q=Y,G=Object(r["a"])(Q,j,P,!1,null,"49ad95e4",null),F=G.exports;n["a"].use(c["a"]);var V=[{path:"/",redirect:"/demo-cn"},{path:"/home",name:"home",component:$},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"/test1",name:"test1",component:function(){return a.e("chunk-8a635936").then(a.bind(null,"b65d"))}},{path:"/test2",name:"test2",component:function(){return a.e("chunk-6c734d7e").then(a.bind(null,"1c79"))}},{path:"/test3",name:"test3",component:function(){return a.e("chunk-2d0e55bf").then(a.bind(null,"93c2"))}},{path:"/test4",name:"test4",component:function(){return a.e("chunk-2d21726c").then(a.bind(null,"c603"))}},{path:"/demo-en",name:"demo-en",component:L},{path:"/demo-cn",name:"demo-cn",component:M},{path:"/demo-keynote",name:"demo-keynote",component:F}],H=new c["a"]({routes:V}),z=H,W=a("2f62");n["a"].use(W["a"]);var q=new W["a"].Store({state:{},mutations:{},actions:{},modules:{}});n["a"].config.productionTip=!1,new n["a"]({router:z,store:q,render:function(e){return e(u)}}).$mount("#app")},"635f":function(e,t,a){"use strict";var n=a("7d5d"),i=a.n(n);i.a},"76b1":function(e,t,a){},"7d5d":function(e,t,a){},"85ec":function(e,t,a){},"8c5b":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.instance?a("div",{staticClass:"line"},[a("plain",{attrs:{text:e.name+":"}}),e._l(e.instance.getSegmentsDisplay(),(function(t,n){return a("div",{staticClass:"seg"},[n===e.instance.getFirstParamIndex()?a("subject",{ref:"subject",refInFor:!0,attrs:{init:e.subject,variables:e.variables,instances:e.instances},on:{alter:e.alterSubject}}):n===e.instance.getFirstTextIndex()?a("div",{staticClass:"predicate-group"},[a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:e.instance.getFirstTextNeighbors("pre")}}),a("predicate",{ref:"predicate",refInFor:!0,attrs:{init:e.predicate,subject:e.subject},on:{alter:e.alterPredicate}}),a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:e.instance.getFirstTextNeighbors("post")}})],1):t.hasOwnProperty("value")?a("adverbial",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],ref:"adverbial",refInFor:!0,attrs:{parameter:t,subject:e.subject,variables:e.variables,instances:e.instances},on:{alter:e.alterAdverbial}}):null!==t.content&&""!==t.content.trim()?a("plain",{directives:[{name:"show",rawName:"v-show",value:e.predicate,expression:"predicate"}],attrs:{text:t.content.trim()}}):e._e()],1)})),e.instance.isLegitimate()?a("plain",{attrs:{symbol:"right"}}):a("plain",{attrs:{symbol:"wrong"}})],2):a("div",{staticClass:"line"},[a("plain",{attrs:{text:e.name+":"}}),a("subject",{ref:"subject",attrs:{variables:e.variables,instances:e.instances},on:{alter:e.alterSubject}}),a("predicate",{ref:"predicate",attrs:{subject:e.subject},on:{alter:e.alterPredicate}})],1)])},i=[],s=(a("b0c0"),a("d3b7"),a("ddb0"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",class:[e.onSwitch?"long":"short"],on:{mouseenter:e.showSwitch,mouseleave:e.hideSwitch}},["constant"===e.curInputType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"variable"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.variables,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"instance"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedInstances,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0):e._e(),e.inputTypes[e.inputIndex-1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"t",on:{click:function(t){return e.changeInputType(-1)}}},[e._v(" ▲"+e._s(e.inputTypes[e.inputIndex-1].abbr())+" ")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"m"},[e._v(" "+e._s(e.inputTypes[e.inputIndex].abbr())+" ")]),e.inputTypes[e.inputIndex+1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"b",on:{click:function(t){return e.changeInputType(1)}}},[e._v(" ▼"+e._s(e.inputTypes[e.inputIndex+1].abbr())+" ")]):e._e()])}),r=[],o=(a("4de4"),a("c975"),a("13e6")),l=[o["k"].INPUT.CONSTANT,o["k"].INPUT.VARIABLE,o["k"].INPUT.INSTANCE],u={name:"Subject",data:function(){return{doEmit:!0,onSwitch:!1,inputTypes:l,inputIndex:0,value:null}},props:["init","variables","instances"],computed:{curInputType:function(){return this.inputTypes[this.inputIndex]},matchedInstances:function(){return this.instances?this.instances.filter((function(e){return null!==e})):[]}},mounted:function(){null!==this.init&&void 0!==this.init&&(this.inputIndex=this.inputTypes.indexOf(o["k"].identifyInputType(this.init)),this.doEmit=!1,this.value=this.init)},methods:{changeInputType:function(e){this.value=null,this.inputIndex+=e},showSwitch:function(){this.onSwitch=!0},hideSwitch:function(){this.onSwitch=!1},syncSubject:function(e){this.value=e}},watch:{value:function(e){this.doEmit?this.$emit("alter",e):this.doEmit=!0}}},c=u,p=(a("abbe"),a("2877")),d=Object(p["a"])(c,s,r,!1,null,"7cb1fbf8",null),m=d.exports,T=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.operators,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0)])},y=[],h={name:"Predicate",data:function(){return{doEmit:!0,operators:[],value:null}},props:["init","subject"],mounted:function(){null!==this.init&&void 0!==this.init&&(null!==this.subject&&void 0!==this.subject&&(this.operators=this.subject.resops()),this.doEmit=!1,this.value=this.init)},methods:{syncPredicate:function(e){this.value=e}},watch:{subject:function(e){null!==e&&void 0!==e&&(this.operators=e.resops(),this.value=null)},value:function(e){this.doEmit?this.$emit("alter",e):this.doEmit=!0},init:function(e){null===e&&(null!==this.subject&&void 0!==this.subject?this.operators=this.subject.resops():this.operators=[],this.value=null)}}},v=h,f=(a("635f"),Object(p["a"])(v,T,y,!1,null,"5ee95199",null)),A=f.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",class:[e.onSwitch?"long":"short"],on:{mouseenter:e.showSwitch,mouseleave:e.hideSwitch}},["constant"===e.curInputType?a("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},attrs:{type:"text"},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}}):"enumerate"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.enums,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"variable"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedVariables,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getLabel()))])})),0):"instance"===e.curInputType?a("select",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],class:{left:!e.onSwitch},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.value=t.target.multiple?a:a[0]}}},e._l(e.matchedInstances,(function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t.getName()))])})),0):e._e(),e.inputTypes[e.inputIndex-1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"t",on:{click:function(t){return e.changeInputType(-1)}}},[e._v(" ▲"+e._s(e.inputTypes[e.inputIndex-1].abbr())+" ")]):e._e(),a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"m"},[e._v(" "+e._s(e.inputTypes[e.inputIndex].abbr())+" ")]),e.inputTypes[e.inputIndex+1]?a("span",{directives:[{name:"show",rawName:"v-show",value:e.onSwitch,expression:"onSwitch"}],staticClass:"b",on:{click:function(t){return e.changeInputType(1)}}},[e._v(" ▼"+e._s(e.inputTypes[e.inputIndex+1].abbr())+" ")]):e._e()])},g=[],$=(a("caad"),a("2532"),[o["k"].INPUT.CONSTANT,o["k"].INPUT.ENUMERATE,o["k"].INPUT.VARIABLE,o["k"].INPUT.INSTANCE]),D={name:"Adverbial",data:function(){return{onSwitch:!1,inputTypes:$,inputIndex:0,enums:[],value:null}},props:["parameter","subject","variables","instances"],computed:{curInputType:function(){return this.inputTypes[this.inputIndex]},matchedVariables:function(){var e=this;return this.variables?this.variables.filter((function(t){return t.getDataType()===e.parameter.getDataType()})):[]},matchedInstances:function(){return this.instances?this.instances.filter((function(e){return null!==e})):[]}},created:function(){var e=this;this.parameter.isInputCompatible(o["k"].INPUT.ENUMERATE)&&o["k"].identifyInputType(this.subject)===o["k"].INPUT.VARIABLE&&this.subject.getEnums().length>0&&(this.enums=this.subject.getEnums()),this.inputTypes=this.inputTypes.filter((function(t){return e.parameter.getCompatibleInputTypes().includes(t)})),0===this.enums.length&&(this.inputTypes=this.inputTypes.filter((function(e){return e!==o["k"].INPUT.ENUMERATE})))},mounted:function(){},methods:{changeInputType:function(e){this.value=null,this.inputIndex+=e},showSwitch:function(){this.onSwitch=!0},hideSwitch:function(){this.onSwitch=!1},syncAdverbial:function(e){this.inputIndex=this.inputTypes.indexOf(o["k"].identifyInputType(e)),this.value=e}},watch:{value:function(e){this.$emit("alter",e,this.parameter.getHolder())}}},N=D,w=(a("c140"),Object(p["a"])(N,b,g,!1,null,"820f899e",null)),E=w.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"outer",style:"width:"+e.width+"px"},["right"===e.symbol?a("span",{ref:"span"},[e._v("✓")]):"wrong"===e.symbol?a("span",{ref:"span",staticStyle:{color:"red"}},[e._v("✗")]):a("span",{ref:"span"},[e._v(e._s(e.text))])])},x=[],S={name:"Plain",data:function(){return{width:0}},props:["text","symbol"],mounted:function(){this.width=this.$refs.span.clientWidth},methods:{}},O=S,R=(a("d548"),Object(p["a"])(O,I,x,!1,null,"d9a10252",null)),M=R.exports,C={name:"ExpressionAtom",components:{Subject:m,Predicate:A,Adverbial:E,Plain:M},data:function(){return{subject:null,predicate:null,instance:null}},props:["name","variables","instances"],computed:{},created:function(){},mounted:function(){},methods:{alterSubject:function(e){this.subject=e,this.predicate=null},alterPredicate:function(e){var t=this;this.predicate=e,null!==e&&void 0!==e&&(this.instance=null,this.$nextTick((function(){t.instance=new o["d"]({template:e,name:t.name}).setFirstValue(t.subject)})))},alterAdverbial:function(e,t){this.instance.setValue(t,e)},syncInstance:function(e){var t=this,a=e.template.getFirstParam().getHolder();this.$refs.subject.syncSubject(e.values[a].getValue()),this.$nextTick((function(){t.$refs.predicate.syncPredicate(e.template),t.$nextTick((function(){var n=function(n){n!==a&&t.$nextTick((function(){t.$nextTick((function(){t.$refs.adverbial[0].syncAdverbial(e.values[n].getValue())}))}))};for(var i in e.values)n(i)}))}))}},watch:{instance:{deep:!0,handler:function(e){null!==e&&this.$emit("alter",e)}}}},_=C,U=(a("f8e0"),Object(p["a"])(_,n,i,!1,null,"b1b0e61e",null));t["a"]=U.exports},"8c97":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("span",{domProps:{textContent:e._s(e.prefix)}}),"wrapper"===e.realMode?a("span",{domProps:{innerHTML:e._s(e.html)}}):a("span",{domProps:{textContent:e._s(e.text)}})])},i=[],s=(a("caad"),{name:"ExpressionNote",data:function(){return{text:"",html:""}},props:["instance","mode","prefix"],computed:{realMode:function(){return["wrapper","code"].includes(this.mode)?this.mode:"display"}},mounted:function(){},methods:{},watch:{instance:{deep:!0,handler:function(e){null!==e&&("wrapper"===this.realMode?(this.text="",this.html=e.getOutWrap(!0)):(this.text=e.outputText(this.realMode),this.html=""))}}}}),r=s,o=a("2877"),l=Object(o["a"])(r,n,i,!1,null,"52ea90db",null);t["a"]=l.exports},"8ce0":function(e,t,a){},a92a:function(e,t,a){},abbe:function(e,t,a){"use strict";var n=a("1c95"),i=a.n(n);i.a},c140:function(e,t,a){"use strict";var n=a("a92a"),i=a.n(n);i.a},cf05:function(e,t,a){e.exports=a.p+"img/logo.82b9c7a5.png"},d548:function(e,t,a){"use strict";var n=a("76b1"),i=a.n(n);i.a},f8e0:function(e,t,a){"use strict";var n=a("3a65"),i=a.n(n);i.a}});
//# sourceMappingURL=app.5659618f.js.map